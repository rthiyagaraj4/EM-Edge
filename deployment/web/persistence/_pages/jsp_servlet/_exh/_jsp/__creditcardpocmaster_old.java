package jsp_servlet._exh._jsp;

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import javax.servlet.jsp.tagext.*;
import java.util.Enumeration;
import java.io.*;

public final class __creditcardpocmaster_old extends  weblogic.servlet.jsp.JspBase  implements weblogic.servlet.jsp.StaleIndicator {

    private static void _releaseTags(javax.servlet.jsp.PageContext pageContext, javax.servlet.jsp.tagext.JspTag t) {
        while (t != null) {
            weblogic.servlet.jsp.DependencyInjectionHelper.preDestroy(pageContext, t);
            if(t instanceof javax.servlet.jsp.tagext.Tag) {
                javax.servlet.jsp.tagext.Tag tmp = (javax.servlet.jsp.tagext.Tag)t;
                t = ((javax.servlet.jsp.tagext.Tag) t).getParent();
                try {
                    tmp.release();
                } catch(java.lang.Exception ignore) {}
            }
            else {
                t = ((javax.servlet.jsp.tagext.SimpleTag)t).getParent();
            }
        }
    }

    public boolean _isStale(){
        boolean _stale = _staticIsStale((weblogic.servlet.jsp.StaleChecker) getServletConfig().getServletContext());
        return _stale;
    }

    public static boolean _staticIsStale(weblogic.servlet.jsp.StaleChecker sci) {
        if (sci.isResourceStale("/exh/jsp/CreditCardPOCMaster_OLD.jsp", 1742181010753L ,"10.3.6.0","Asia/Calcutta")) return true;
        return false;
    }

    private static boolean _WL_ENCODED_BYTES_OK = true;
    private static final java.lang.String _WL_ORIGINAL_ENCODING = "ISO-8859-1".intern();

    private static byte[] _getBytes(java.lang.String block){
        try {
            return block.getBytes(_WL_ORIGINAL_ENCODING);
        } catch (java.io.UnsupportedEncodingException u){
            _WL_ENCODED_BYTES_OK = false;
        }
        return null;
    }

    private final static java.lang.String  _wl_block0 ="<!DOCTYPE html>\n";
    private final static byte[]  _wl_block0Bytes = _getBytes( _wl_block0 );

    private final static java.lang.String  _wl_block1 ="\n";
    private final static byte[]  _wl_block1Bytes = _getBytes( _wl_block1 );

    private final static java.lang.String  _wl_block2 ="\n<HTML>\n\n";
    private final static byte[]  _wl_block2Bytes = _getBytes( _wl_block2 );

    private final static java.lang.String  _wl_block3 ="\n<HEAD>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=10\">\n<TITLE>New Document</TITLE>\n<meta charset=\"utf-8\">\n<link rel=\"StyleSheet\" href=\"../../eCommon/html/";
    private final static byte[]  _wl_block3Bytes = _getBytes( _wl_block3 );

    private final static java.lang.String  _wl_block4 ="\"\n\ttype=\"text/css\" />\n<Script src=\"../../eCommon/js/showModalDialog.js\" language=\"JavaScript\"></Script><script language=\"javascript\" src=\"../../eCommon/js/common.js\"></script>\n<script language=\"javascript\" src=\"../../eCommon/js/ValidateControl.js\"></script>\n<script language=\"javascript\" src=\"../../eXH/js/ExternalApplication.js\"></script>\n<script language=\"javascript\" src=\"../../eCA/js/jquery-1.7.2.min.js\"></script>\n\n<script Language=\"JavaScript\">\n\n\t\n\tvar websocket;\n\t\n\t$(document).ready(function() {   \n\n\t\t$(\"#connect\").click(function() {\n\n\t\t\t/*\n\n\t\t\tvar myNav = navigator.userAgent.toLowerCase();\n\n\t\t\t$(\"#status\").val(\"\");\n\t\t\t$(\"#messagesList\").val(\"\");\n\t\t\t$(\"#insuranceid\").val(\"\");\n\n\t\t\tvar id = invokeInsuranceCardReader(\"insuranceid\",\"cardStatus\"); //invokeInsuranceCardReader(\"insuranceid\",\"cardStatus\");\t\n\n\t\t\treturn false;     \n\n\t\t\t*/\n\t\t\t\n\t\t\tvalidate_hid_tranx();\n\t\t\t\n\t\t\t/*\n\n\t\t\tvar arguments = new Array();\n\n\t\t\tvar dialogWidth\t= \"600px\";\n\t\t\tvar dialogHeight = \"200px\";\n\t\t\tvar dialogTop    = \"100\";\n\t\t\tvar dialogLeft   = \"100\";\n\n\t\t\tvar features = \"dialogHeight:\" + dialogHeight + \"; dialogWidth:\" + dialogWidth+ \"; dialogLeft:\" +dialogLeft+ \"; dialogTop:\" +dialogTop+ \";status:yes;scroll:no\";\t\n\n\t\t\tvar action_url\t=\"../../eXH/jsp/WebSocketPOC.jsp\";\n\n\t\t\t\n\t\t\tvar retVal = window.open(action_url,\"\",  \"toolbar=no,scrollbars=yes,resizable=yes,top=100,left=200,width=800,height=200\");\n\t\t\t\n\t\t\t*/\n\t\t\t\n\t\t});\n\n\t\t$(\"#paysky\").click(function() {\t\t\t\n\t\t\t\t\t\n\t\t\talert(\"Document Mode in POC Page : \"+document.documentMode);\t\t\t\n\t\t\t\n\n\t\t\tvalidate_ps_tranx();\n\t\t\t\n\t\t});\n\n\t\t$(\"#PayerRequest\").click(function() {\n\n\t\t\tPayerRequest();\n\t\t\t\n\t\t});\n\n\t\t$(\"#EmiratesIdBtn\").click(function() {\n\n\t\t\tGetEmiratesId();\n\t\t\t\n\t\t});\n\t\t\n\t\t/* $(\"#CaptureSignature\").click(function() {\t\t\t\n\t\t\t\n\t\t\talert(\"Document Mode in POC Page : \"+document.documentMode);\t\t\t\n\n\t\t\tvalidate_eSignature();\n\t\t\t\n\t\t\t\n\t\t}); */\n\t\t\n\t});\n\n\t/*\n\t$(document).ready(function() {   \n\n\t\t$(\"#connect\").click(function() {\t\t\t\n\n\t\t\t$(\"#status\").val(\"\");\n\t\t\t$(\"#messagesList\").val(\"\");\n\t\t\t$(\"#insuranceid\").val(\"\");\n\n\t\t\tvar socketUri = $(\"#websocketuri\").val();\t\n\n\t\t\t*/\n\n\t\t\t/* ************************\n\t\t\tvar arguments = new Array();\n\n\t\t\tvar dialogWidth\t= \"300px\";\n\t\t\tvar dialogHeight = \"300px\";\n\t\t\tvar dialogTop    = \"100\";\n\t\t\tvar dialogLeft   = \"100\";\n\n\t\t\tvar features = \"dialogHeight:\" + dialogHeight + \"; dialogWidth:\" + dialogWidth+ \"; dialogLeft:\" +dialogLeft+ \"; dialogTop:\" +dialogTop+ \";status:yes;scroll:no\";\t\n\n\t\t\tvar action_url\t=\"../../eXH/jsp/WebSockets.html\";\n\n\t\t\tvar retVal = window.open(action_url,\"\",  \"toolbar=no,scrollbars=yes,resizable=yes,top=100,left=500,width=400,height=400\");\n\n\t\t\t*/\n\t\t\t\n\t\t\t/*\n\t\t\twebsocket = new WebSocket(socketUri,\"echo-protocol\");\n\n\t\t\t$(\"#status\").val(\"Connected\");\n\t\t\t\n\t\t\treturn false;     \n\t\t\t\n\t\t});\n\n\t\t$(\"#send\").click(function() {\t\n\t\t\t\n\t\t\tvar message = $(\"#request\").val();\t\n\n\t\t\twebsocket.send(message);\n\n\t\t\t$(\"#status\").val(\"Message Sent\");\n\n\t\t\t$(\"#messagesList\").val(message);\n\n\t\t\tvar data = JSON.parse(message);\n\t\t\tvar x=data.message;\n\n\t\t\t$(\"#insuranceid\").val(x);\n\n\t\t\treturn false;     \n\t\t\t\n\t\t});\n\t\t\n\t});\n\n\t*/\n\n\t\n\n\tfunction runApp(which) {\n\t\tWshShell = new ActiveXObject(\"WScript.Shell\");\n\t\tWshShell.Run (which,1,true);\n\t}\n\tfunction getCardData()\n\t{\t\n\t\tvar ecr_counter = \"1\";\n\t\tvar application_id = \"11\";\n\t\tvar machine_port = \"COM1\";\n\t\tvar baud_rate = \"19200\";\n\t\tvar cash_given = \"0.01\";\t\n\t\tvar application = \"PLUTUS\";\n\t\tvar wait_time = \"\";\n\t\t\n\t\tvar ccData = \"\";\n\t\tvar transNo = 0;\n\n\t\tapplication = document.getElementById(\"application\").value;\n\t\tcash_given = document.getElementById(\"cash_given\").value;\t\n\n\t\tif (application == \"SPECTRA\") \n\t\t{\n\t\t\n\t\t\tecr_counter = document.getElementById(\"ecr_counter\").value;\n\t\t\tapplication_id = document.getElementById(\"application_id\").value;\n\t\t\tmachine_port = document.getElementById(\"machine_port\").value;\n\t\t\tbaud_rate = document.getElementById(\"baud_rate\").value;\n\t\t\tcash_given = document.getElementById(\"cash_given\").value;\t\n\t\t\twait_time = document.getElementById(\"wait_time\").value;\t\n\n\t\t\tif (ecr_counter==\"\") {\n\t\t\t\tecr_counter = \"1\";\n\t\t\t\tdocument.getElementById(\"ecr_counter\").value = \"1\";\n\t\t\t}\n\n\t\t\tif (ecr_counter==\"\") {\n\t\t\t\tecr_counter = \"1\";\n\t\t\t\tdocument.getElementById(\"ecr_counter\").value = \"1\";\n\t\t\t}\n\n\t\t\tif (application_id==\"\") {\n\t\t\t\tapplication_id = \"11\";\n\t\t\t\tdocument.getElementById(\"application_id\").value = \"11\";\n\t\t\t}\n\n\t\t\tif (machine_port==\"\"){\n\t\t\t\tmachine_port = \"COM1\";\n\t\t\t\tdocument.getElementById(\"machine_port\").value = \"COM1\";\n\t\t\t}\n\n\t\t\tif (baud_rate==\"\"){\n\t\t\t\tbaud_rate = \"19200\";\n\t\t\t\tdocument.getElementById(\"baud_rate\").value = \"19200\";\n\t\t\t}\n\n\t\t\tif (cash_given==\"\"){\n\t\t\t\tcash_given = \"0.01\";\n\t\t\t\tdocument.getElementById(\"cash_given\").value = \"0.01\";\n\t\t\t}\t\t\t\n\t\t\t\n\t\t\t//ccData =\"Transaction_type=debit$!^Amount=0.01$!^ECR_counter=1$!^Application_id=11$!^Refund_rrn=null$!^Menu=null$!^Printer=null$!^Printer_speed=null$!^Machine_port=COM1$!^BoudRate=19200\";\n\n\t\t\tccData =\"Transaction_type=debit$!^Amount=\"+cash_given+\"$!^ECR_counter=\"+ecr_counter+\"$!^Application_id=\"+application_id+\"$!^Refund_rrn=null$!^Menu=null$!^Printer=null$!^Printer_speed=null$!^Machine_port=\"+machine_port+\"$!^BoudRate=\"+baud_rate+\"$!^intExtAppID=\"+application+\"$!^WaitTime=\"+wait_time;\n\t\t}\n\t\t\n\t\tif (application == \"PLUTUS\") {\n\n\t\t\ttransNo = document.getElementById(\"transNo\").value;\n\t\t\ttransNo = Number(transNo) + Number(1);\n\t\t\tdocument.getElementById(\"transNo\").value = transNo;\n\t\t\tccData = \"4001,\"+transNo+\",100,PLUTUS,,,,,,,,\"; \n\t\t}\n\n\t\tif (application == \"PHONEPE\") {\n\n\t\t\ttransNo = document.getElementById(\"transNo\").value;\n\t\t\ttransNo = Number(transNo) + Number(1);\n\t\t\tdocument.getElementById(\"transNo\").value = transNo;\n\t\t\tccData = \"5102,\"+transNo+\",100,PHONEPE,,,,,,,,\"; \n\t\t}\n\n\t\tvar arr = ccData.split(\",\");\n\t\tif (arr.length>1)\n\t\t{\n\n\t\t\tif ( arr[3] != null && arr[3] != \"\")\n\t\t\t{\n\t\t\t\tif (arr[3] == \"PLUTUS\")\n\t\t\t\t\tccData = ccData.replace(\"PLUTUS\", \"\");\n\t\t\t\telse if (arr[3] == \"PHONEPE\")\n\t\t\t\t\tccData = ccData.replace(\"PHONEPE\", \"105\");\n\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\talert(ccData);\n\t\trunApp(\"file://C:/em-interface/EM_CC_PLUGIN/EM_CC_COM_PORT_Start.bat\");\n\t\tvar summary = document.CreditCardReader.Capture(ccData);\n\t\tvar arr = \"\";\n\n\t\talert(summary);\t\t\n\t\t\n\t}\n\n\tfunction callApplication()\n\t{\n\t\tvar applicationID = \"\";\n\t\tapplicationID = document.getElementById(\"application\").value;\n\n\t\tif (applicationID == \"PLUTUS\"||applicationID == \"PHONEPE\") {\n\t\t\tdocument.getElementById(\"ecr_counter\").disabled = true;\n\t\t\tdocument.getElementById(\"application_id\").disabled = true;\n\t\t\tdocument.getElementById(\"machine_port\").disabled = true;\n\t\t\tdocument.getElementById(\"baud_rate\").disabled = true;\n\t\t}\n\t\tif (applicationID == \"SPECTRA\") {\n\t\t\tdocument.getElementById(\"ecr_counter\").disabled = false;\n\t\t\tdocument.getElementById(\"application_id\").disabled = false;\n\t\t\tdocument.getElementById(\"machine_port\").disabled = false;\n\t\t\tdocument.getElementById(\"baud_rate\").disabled = false;\n\t\t}\n\n\t\tdocument.CreditCardReader.setApplicationId(applicationID);\n\t}\n\n\tfunction loadPage()\n\t{\n\t\tdocument.getElementById(\"ecr_counter\").disabled = true;\n\t\tdocument.getElementById(\"application_id\").disabled = true;\n\t\tdocument.getElementById(\"machine_port\").disabled = true;\n\t\tdocument.getElementById(\"baud_rate\").disabled = true;\n\n\t\tvar applicationID = \"\";\n\t\tapplicationID = document.getElementById(\"application\").value;\n\t\t//document.CreditCardReader.setApplicationId(applicationID);\n\t}\n\n\tfunction getEligibilityCheck()\n\t{\n\t\tvar dataElements = \"<PATIENT_ID>0966865$!^<ENCOUNTER_ID>106018210001$!^<NATIONAL_ID>1177299250$!^<PATIENT_NAME>Zainab Mohammed Faadel Awal$!^<PATIENT_DOB>2015-12-19$!^<MOBILE_NO>0545530032$!^<MEMBERSHIP_NO>14933819$!^<POLICY_HOLDER_NAME>Zainab Mohammed Faadel Awal$!^<POLICY_PLAN_NO>272672003$!^<PROVIDER_CODE>15$!^<SERVICE_TYPE>CAD1$!^<PAYER_CODE>15-00163$!^<FACILITY_ID>02$!^<LOGGED_IN_USER_ID>IBAEHIS$!^<LOGGED_IN_WSNO>172.18.10.93$!^<SESSION>REGVISIT\";\n\n\t\t//var dataElements = \"<PATIENT_ID>0966865$!^<ENCOUNTER_ID>106018210001$!^<NATIONAL_ID>1177299250$!^<PATIENT_NAME>Zainab Mohammed Faadel Awal$!^<PATIENT_DOB>2015-12-19$!^<MOBILE_NO>0545530032$!^<MEMBERSHIP_NO>14933819$!^<POLICY_HOLDER_NAME>Zainab Mohammed Faadel Awal$!^<POLICY_PLAN_NO>272672003$!^<PROVIDER_CODE>CP$!^<SERVICE_TYPE>O002$!^<PAYER_CODE>CORP0011$!^<FACILITY_ID>02$!^<LOGGED_IN_USER_ID>IBAEHIS$!^<LOGGED_IN_WSNO>172.18.10.93$!^<SESSION>REGVISIT\";\n\n\t\tvar patient_id = \"0966865\";\n\t\t\n\t\tvar response = checkPatientMembershipEligibility(dataElements,patient_id);\n\n\t\talert(response);\n\t}\n\n\n\tfunction showPDFFile()\n\t{\n\t\tvar retVal = \"\";\n\t\tvar url = \"\";\n\t\tvar dialogHeight = \"5\";\t\t\t    \n\t\tvar dialogWidth  = \"20\";\n\t\tvar dialogTop    = \"300\";\n\t\tvar dialogLeft   = \"450\";\n\t\tvar applicationID = \"\";\n\n\t\tdialogHeight = screen.height;\t\t\t    \n\t\tdialogWidth  = screen.width;\n\t\tdialogTop    = \"0\";\n\t\tdialogLeft   = \"0\";\n\t\tfeatures = \"dialogHeight:\" + dialogHeight + \"; dialogWidth:\" + dialogWidth+ \"; dialogLeft:\" +dialogLeft+ \"; dialogTop:\" +dialogTop+ \"; status:no;scroll:no\" ;\n\t\t\n\t\turl = \"../../eMP/jsp/ViewPatientScanDocument.jsp\"\n\t\tretVal = window.showModalDialog(url,arguments,features);\n\t\t//retVal = window.open(url);\n\n\t\t\n\t}\n\n\tfunction validOTPTransaction(request)\n\t{\n\t\tvar phone= document.getElementById(\"PhoneNum\").value;\n\t\tvar otp= document.getElementById(\"OTP\").value;\n\n\t\tvar dataElements = \"<FACILITY_ID>JD$!^<PATIENT_ID>JA01000027$!^<PHONE_NUM>\"+phone+\"$!^<PRIM_SEC_FLAG>P$!^<OTP>\"+otp+\"$!^<REQUEST>\"+request+\"$!^<USER>user$!^<WS_NO>DXCINDAI103\";\n\n\t\talert(dataElements);\n\n\t\tvar response = \"\";\n\n\t\tresponse = OTPTransaction(dataElements);\n\n\t\talert(response);\n\t} \n\n\tfunction ShowURL()\n\t{\n\t\tvar dataElements           = \"P_USE_ID=RAO&P_NUHDEEK_ID=100628951&P_PATIENT_ID=JA01000027&P_ENCNTR_DATE=&P_VISIT_ID=&P_EPISODE_ID=&P_EPISODE_TYPE=&P_PHYSICIAN_ID=&P_ACCESSION_NUM=&P_ORDER_ID=&P_ORDER_TYPE_CODE=&P_LOCN_TYPE=&P_LOCN_CODE=&P_CUST_CODE=&P_ITEM_CODE=&P_RESP_ID=&P_FACILITY_ID=JA&P_INV_ORG_ID=&P_MODULE_ID=OP&P_FUNCTION_ID=&P_ACCESS_RIGHTS=&P_LANGUAGE_ID=en&P_MULTI_SITE_YN=&P_MULTI_LANG_YN=&P_WS_NO=&P_Ext_Input_Key=&P_Ext_Application_ID=DMS&P_Ext_Function=VIEW&P_pwd=&P_Connect_string=&P_LOCN_DESC=\";\n            \n        dispExtApp(dataElements); \n\n\t}\n\t\n\tfunction MalaffiPortal()\n\t{\n\t\tvar practitionerid = document.getElementById(\"practitionerid\").value;\n\t\tvar patientid = document.getElementById(\"patientid\").value;\n\n\t\tvar dataElements = \"<PATIENT_ID>\"+patientid+\"$!^<PRACTITIONER_ID>\"+practitionerid+\"$!^<USER_NAME>\"+practitionerid+\"$!^<MACHINE_ID>DXCINDAI696704$!^<SESSION_ID>XYZ123\";\n\n\t\tvar response = \"\";\n\n\t\talert(dataElements);\n\n\t\tresponse = EMWebMalaffi(dataElements);\n\n\t} \t\n\n\tfunction invokeInsuranceCardReader(fieldName, statusFieldName)\n\t{\n\t\tvar segment_id = \"ICR\", element_id = \"WEBSOCKET_URL\", standard_code = \"INSCARDSTD\";\n\t\n\t\tvar websocketurl = getGetSegmentData(standard_code, segment_id, element_id);\n\t\t//var websocketurl = \"wss://echo.websocket.org/\";\n\n\n\t\t$(\"#websocketuri\").val(websocketurl);\n\t\t\n\t\tvar insuranceField = \"#\"+fieldName;\n\t\t$(insuranceField).val(\"\");\n\n\t\tvar statusfield = \"#\"+statusFieldName;\n\n\t\t$(statusfield).text(\"Inside Card Reader\");\n\n\t\tinsuranceid = \"\";\n\t\t//var socketUri = $(\"#websocketuri\").val();\n\t\t//websocket = new WebSocket(\'ws://localhost:8025/ws/chat\');\n\n\t\twebsocket = new WebSocket(websocketurl);\t\t\n\t\twebsocket.onopen = function(evt) { onOpen(evt, statusFieldName) };\n\t\twebsocket.onclose = function(evt) { onClose(evt, statusFieldName) };\n\t\twebsocket.onmessage = function(evt) { onMessage(evt, fieldName, statusFieldName) };\n\t\twebsocket.onerror = function(evt) { onError(evt, fieldName, statusFieldName) };\n\n\t\treturn insuranceid;\n\t}\n\n\tfunction onOpen(evt, statusFieldName)\n\t{\n\t\t$(\"#status\").val(\"Connected\");\n\t\tvar message = $(\"#request\").val();\t\n\t\tdoSend(message, statusFieldName);\n\t}\n\n\tfunction onClose(evt, statusFieldName)\n\t{\n\t\t$(\"#status\").val(\"Disconnected\");\n\t\tvar statusfield = \"#\"+statusFieldName;\n\t\t$(statusfield).text(\"Message Received and Closed\");\n\t}\n\n\tfunction onMessage(evt, fieldName, statusFieldName)\n\t{\n\t\t$(\"#status\").val(\"Message Received\");\n\n\t\t$(\"#messagesList\").val(JSON.stringify(evt.data));\n\n\t\tvar data = JSON.parse(evt.data);\n\t\tvar insuranceData=data.message;\n\n\t\tvar insuranceField = \"#\"+fieldName;\n\t\t$(insuranceField).val(insuranceData);\n\n\t\tvar statusfield = \"#\"+statusFieldName;\n\t\t$(statusfield).text(\"Message Received\");\n\n\t\tinsuranceid = insuranceData;\n\t\twebsocket.close();\n\t}\n\n\tfunction onError(evt, fieldName, statusFieldName)\n\t{\t\t\n\t\t$(\"#status\").val( evt.data);\n\t\tvar insuranceField = \"#\"+fieldName;\n\t\t$(insuranceField).val(\"\");\n\t\tvar statusfield = \"#\"+statusFieldName;\n\t\t$(statusfield).text(evt.data);\n\t}\n\n\tfunction doSend(message, statusFieldName)\n\t{\n\t\twebsocket.send(message);\n\t\t$(\"#status\").val(\"Message Sent\");\n\t\tvar statusfield = \"#\"+statusFieldName;\n\t\t$(statusfield).text(\"Message Sent\");\n\t}\n\n\tfunction NuhdeekRequest(nuhdeek)\n\t{\t\n\t\t\n\t\tvar request = document.getElementById(\"nuhdeekreq\").value;\n\t\tvar patientid = document.getElementById(\"patientid1\").value;\n\t\tvar coupons = document.getElementById(\"coupons\").value;\n\t\tvar transactionId = document.getElementById(\"transactionid\").value;\n\n\t\tresponse = NuhdeekTransactions(request, patientid, coupons, transactionId, \"ARSHAD\", \"INTERFACE\" );\n\t\talert(response);\n\t} \t\n\n\tfunction getDocumentMode()\n\t{\t\n\t\t\n\t\tvar documentModeStr = document.documentMode;\n\n\t\talert(documentModeStr);\t\t\n\t\t\n\t}\n\n\n\tfunction PayerRequest()\n\t{\n\n\t\tvar responseMsg = \"S$!^3491$!^ ::: l_trans_num : 3491$!^IDCPLP3800116764$!^Rejected$!^452$!^Info Req Blocked$!^85906269853631$!^R$!^\";\n\n\t\tvar responseData = \"\";\n\n\t\tresponseData = responseMsg.split(\"$!^\");\n\n\t\tif (responseData.length > 0)\n\t\t{\n\t\t\talert(\" Response Data Length... \"+responseData);\n\t\t\tif (responseData[0] == \"S\")\n\t\t\t{\n\t\t\t\talert(\" Response Data Flag... \"+responseData[0]);\n\t\t\t\tif(!(responseData[8] !=\"R\"))\n\t\t\t\t{\n\t\t\t\t\talert(\" Response Data Code... \"+responseData[8]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*\n\n\n\t\tvar pRequestType = document.getElementById(\"Request_Type\").value;\n\t\tvar pFacilityId = document.getElementById(\"Facility_Id\").value;\n\t\tvar pDispData = document.getElementById(\"Disp_Data\").value;\n\t\tvar pAddedById = document.getElementById(\"Added_By_id\").value;\n\t\tvar pAddedWorkstationId = document.getElementById(\"Workstation_id\").value;\n\n\t\talert(pDispData);\n\n\t\tvar response = \"\";\n\n\t\tresponse = PayerAuthorization(pRequestType, pFacilityId, pDispData, pAddedById, pAddedWorkstationId);\n\n\t\talert(response);\n\n\t\t*/\n\t} \n\n\t//Added by Sethu for MOHE-CRF-0076 on 01/08/2021\n\tfunction validate_ps_tranx()\n\t{\n\t\tvar patientID = \"\";\n\t\tvar payAmount = \"\";\n\t\tvar merchantOrderID = \"\";\n\t\t\n\t\tvar payskyReturnStr = \"\";\n\t\tvar paySkyParam = \"\";\n\t\tvar paySkyData = \"\";\n\n\t\tpatientID = $(\"#patientId\").val();//\"A100000232\";\t\t\t\n\t\tpayAmount = $(\"#amount\").val();//100.00;\n\t\tmerchantOrderID = $(\"#transactionId\").val();//\"100001\";\n\t\t\n\t\tvar segmentId = \"PSR\";\t\t\n\t\tvar waitime = getWaitTime(segmentId);\n\n\t\tpaySkyParam+=\"saledraftno=\"+merchantOrderID;\n\t\tpaySkyParam+=\"&patientid=\"+patientID;\n\t\tpaySkyParam+=\"&amount=\"+payAmount;\n\t\tpaySkyParam+=\"&requesttype=RequestPayment\";\n\t\tpaySkyParam+=\"&waitime=\"+waitime;\n\t\t\n\t\tpayskyReturnStr = PaySkyTransaction(paySkyParam);\n\t\t\n\t\tif (payskyReturnStr.length > 0){\n\n\t\t\tpaySkyData = payskyReturnStr.split(\"$!^\");\t\t\t\n\n\t\t\tif (paySkyData.length > 0)\n\t\t\t{\t\t\t\t\n\t\t\t\tif (paySkyData[0] == \"SUCCESS\"){\t\t\t\t\t\n\t\t\t\t\tdocument.forms[0].merchantId.value = paySkyData[4];\n\t\t\t\t\tdocument.forms[0].payskyId.value = paySkyData[3];\n\t\t\t\t\tdocument.forms[0].datetime.value = paySkyData[5];\t\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tdocument.forms[0].merchantId.value = paySkyData[4];\t\t\t\t\t\t\n\t\t\t\t\tdocument.forms[0].payskyId.value = \"\";\n\t\t\t\t\tdocument.forms[0].datetime.value = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\n\t\n\t//Added by Sethu for MOHE-CRF-0076 on 01/08/2021\n\tfunction validate_hid_tranx()\n\t{\t\n\t\tvar payskyReturnStr = \"\";\n\t\tvar paySkyParam = \"\";\n\t\t\n\t\tvar segmentId = \"PSR\";\t\t\n\t\tvar waitime = getWaitTime(segmentId);\t\t\n\n\t\tpaySkyParam+=\"requesttype=CustInq\";\t\t\n\t\tpaySkyParam+=\"&waitime=\"+waitime;\n\t\tpayskyReturnStr = PaySkyTransaction(paySkyParam);\n\t\t\n\t\talert(payskyReturnStr);\n\t\t\t\t\t\n\t\tdocument.forms[0].insuranceid.value = payskyReturnStr;\t\n\t\tdocument.forms[0].patientId.value = payskyReturnStr;\t\t\n\t\t\n\t}\t\n\t\n\t\n\t\n\t/* function validate_eSignature()\n\t{\n\n\t\tvar action_url\t=\"../../eXH/jsp/CaptureSignature.jsp\";\n\n\t\tvar center=\'1\';\n\t\tvar dialogTop = \"200\";\n\t\tvar dialogHeight = \"30\" ;\n\t\tvar dialogWidth = \"50\" ;\n\t\tvar features= \"dialogTop:\" + dialogTop + \"; dialogHeight:\" + dialogHeight + \"; center:\" + center + \"; dialogWidth:\" + dialogWidth +\";status=no\" ;\t\n\t\tvar arguments = \"\" ;\n\n\t\tretVal=window.showModalDialog(action_url,arguments,features);\n\t\t\n\t\t//alert(\" *** Base64 Data :\"+retVal);\n\t\t\n\t\t\t\t\n\t\t/* var img = new Image();\n\t\tfunction getBase64Img() {\n\t\t    //var x = \"data:image/png;base64,\"+ retVal;\n\t\t    var x = retVal;\n\t\t    return x;\n\t\t    \n\t\t}\n\t\t\n\t\tvar base64img = getBase64Img();\n\t\t\n\t\t\n\t\tfunction Base64ToImage(base64img, callback) {\n\t\t    img.onload = function() {\n\t\t        callback(img);\n\t\t    };\n\t\t    img.src = base64img;\n\t\t    \n\t\t    \n\t\t}\n\t\tBase64ToImage(base64img, function(img) {\n\t\t\tdocument.getElementById(\'main\').appendChild(img) ;\t\t  \t\t  \n\t\t});\t \n\t\t\n\t\t\n\t    return retVal;\n\t    \n\t}*/\n \t\n\t\n\n\tfunction GetEmiratesId(){\n\n\t\tvar name_prefix =\'\';\n\t\tvar first_name=\'\';\n\t\tvar second_name=\'\';\n\t\tvar third_name=\'\';\n\t\tvar family_name=\'\';\t\t\n\t\tvar nric_val=\'\';\n\t\tvar dob_val=\'\';\t\t\n\t\tvar gender_val=\'\';\n\t\tvar nationality_val=\'\';\n\t\t\n\t\tvar addr_line_1=\'\';\n\t\tvar addr_line_2=\'\';\n\t\tvar addr_line_3=\'\';\n\t\tvar country_val=\'\';\t\t\t\t\n\t\tvar mobile_no=\'\';\n\t\tvar passport_no=\'\';\n\t\tvar passport_exp=\'\';\n\t\tvar temp_arr=\'\';\t\t\t\n\t\t\n\t\tvar summary = document.getElementById(\'CardReader\').Capture();\n\t\tvar arr = \"\";\n\n\t\tif(summary!=\"\"){\n\t\t\t\n\t\t\tvar cardDataArr\t= summary.split(\"$!^\");\n\t\t\tvar nameArr\t\t= cardDataArr[7].split(\",\");\n\t\t\tfirst_name\t\t= nameArr[0];\n\t\t\tsecond_name\t\t= nameArr[1];\n\t\t\tthird_name\t\t= nameArr[2];\n\t\t\tname_prefix\t\t= nameArr[3];\n\t\t\tfamily_name\t\t= nameArr[4];\n\t\t\t\n\t\t\tgender_val\t\t= cardDataArr[8];\n\t\t\tnric_val\t\t= cardDataArr[10];\n\t\t\tdob_val\t\t\t= cardDataArr[11];\n\t\t\taddr_line_1\t\t= cardDataArr[13];\n\t\t\tmobile_no\t\t= cardDataArr[15];\n\t\t\tpassport_no\t\t= cardDataArr[16];\n\t\t\tpassport_exp\t= cardDataArr[17];\n\t\t\tnationality_val\t= cardDataArr[12];\n\t\t\tcountry_val\t\t= cardDataArr[12];\n\n\t\t\tdocument.forms[0].Emirates_Id.value = nric_val;\t\n\n\t\t}\n\n\t\talert(\" Emirates Id... \"+nric_val);\n\t}\n\t\n\tfunction createSearch(){\n\t\tvar AbhaInfo = createSearchABHAID();\n\t\talert(\"AbhaInfo: \"+AbhaInfo);\n\t}\n\t\n\tfunction updateAbhaDtls(){\n\t\tvar response = updateABHADetails(\"\",\"\",\"\",\"\",\"\");\n\t\t\n\t\tif(response){\n\t\t\talert(\"Response: \"+response);\n\t\t}\n\t}\n\t\n\tfunction scanShareAbhaDtl(){\n\t\tvar response = scanAndShareAbhaId(\"\",\"\",\"\",\"\",\"\");\n\t\t\n\t\tif(response){\n\t\t\talert(\"Response: \"+response);\n\t\t}\n\t}\t\n\n\t\tfunction eligibilityCheck() {\n\t\t\talert(\'start eligibilityCheck...\');\n            var xhr = new XMLHttpRequest();\n          \n            var url = \"XHDisplayECBenfitsTable.jsp?patient_id=AS40000255&response_ref_id=1234567\";\n            xhr.open(\"GET\", url, true);\n\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                   document.getElementById(\"tobTableDiv\").innerHTML = xhr.responseText;\n                }\n            };\n\n          \n            xhr.send();\n\t\t\talert(\'end eligibilityCheck...\');\n        }\n\t\n\tfunction spectraWebPayments(){\n\t\tvar dataElements = \"\";\n\t\tvar requestMsg = \"Patient_id=\"+document.getElementById(\"sPatId\").value+\"&Amount=\"+document.getElementById(\"sAmount\").value\n\t\t+\"&Request_type=\"+document.getElementById(\"sReqType\").value+\"&WaitTime=30&Ws_url=\"+document.getElementById(\"sWeburl\").value\n\t\t+\"&Machine_port=\"+document.getElementById(\"sMport\").value\n\t\t+\"&BoudRate=\"+document.getElementById(\"sBoudRate\").value+\"&Print_settings=0\";\n\t\t\n\t\tvar responseMsg = openSpectraWebPayments(dataElements, requestMsg);\n\t}\n\t\n\tfunction openSpectraWebPayments(dataElements, p_request_data) {\t\t\n\n\tvar action_url = \"../../eXH/jsp/BLSpectraWebPayments.jsp?\" + p_request_data;\n\t//var action_url = \"../../eXH/html/Geidea_Test_ECR.html?\" + p_request_data;\n\n\tvar center = \'1\';\n\tvar dialogTop = \"200\";\n\tvar dialogHeight = \"30\";\n\tvar dialogWidth = \"50\";\n\tvar features = \"dialogTop:\" + dialogTop + \"; dialogHeight:\" + dialogHeight\n\t\t\t+ \"; center:\" + center + \"; dialogWidth:\" + dialogWidth\n\t\t\t+ \";status=no\";\n\tvar arguments = \"\";\n\n\tretVal = window.showModalDialog(action_url, arguments, features);\n\t\n\treturn retVal;\n}\n</script>\n</HEAD>\n\n<body onload=\"loadPage()\">\n\t<form>\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Application</td>\n\t\t\t\t<!--\n\t\t\t<td width=\"25%\" class=\"fields\" COLSPAN=\"3\"><select id=\"application\" name=\"application\" id=\"application\" onChange=\"callApplication()\">\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"PLUTUS\">PLUTUS</option>\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"SPECTRA\">SPECTRA</option>\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t</select> </td>\t\n\t\t\t-->\n\n\t\t\t\t<td width=\"25%\" class=\"fields\" COLSPAN=\"3\"><select id=\"application\" name=\"application\" id=\"application\">\n\t\t\t\t\t\t<option value=\"PLUTUS\">PLUTUS</option>\n\t\t\t\t\t\t<option value=\"SPECTRA\">SPECTRA</option>\n\t\t\t\t</select></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">ECR Counter (1)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"ecr_counter\" id=\"ecr_counter\" id=\"ecr_counter\" size=\"14\" maxlength=\"10\"\n\t\t\t\t\tvalue=\"1\" style=\"text-align: left\"></td>\n\t\t\t\t<td width=\"25%\" class=\"label\">Application ID (11)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"application_id\" id=\"application_id\" id=\"application_id\" size=\"14\" maxlength=\"10\"\n\t\t\t\t\tvalue=\"11\" style=\"text-align: left\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Port (COM1)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"machine_port\" id=\"machine_port\" id=\"machine_port\" size=\"14\" maxlength=\"10\"\n\t\t\t\t\tvalue=\"COM1\" style=\"text-align: left\"></td>\n\t\t\t\t<td width=\"25%\" class=\"label\">Baud Rate (19200)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"baud_rate\" id=\"baud_rate\" id=\"baud_rate\" size=\"14\" maxlength=\"10\"\n\t\t\t\t\tvalue=\"19200\" style=\"text-align: left\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Amount (0.01)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"cash_given\" id=\"cash_given\" id=\"cash_given\" size=\"14\" maxlength=\"10\"\n\t\t\t\t\tvalue=\"0.01\" style=\"text-align: right\"></td>\n\t\t\t\t<td width=\"25%\" class=\"label\">Wait Time (in seconds)</td>\n\t\t\t\t<td width=\"25%\" class=\"fields\"><input type=\"text\"\n\t\t\t\t\tname=\"wait_time\" id=\"wait_time\" id=\"wait_time\" size=\"14\" maxlength=\"10\" value=\"30\"\n\t\t\t\t\tstyle=\"text-align: left\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td align=left COLSPAN=\"2\">\n\t\t\t\t\t<!--<input class=\"button\" type=\"button\"  name=\"Eligibility Check\" value=\"Eligibility Check\" onClick=\"getEligibilityCheck();\"> -->\n\t\t\t\t\t<!--<input class=\"button\" type=\"button\"  name=\"Show PDF File\" value=\"Show PDF File\" onClick=\"showPDFFile();\">-->\n\t\t\t\t\t<input class=\"button\" type=\"button\" name=\"Nuhdeek\" id=\"Nuhdeek\" value=\"Nuhdeek\"\n\t\t\t\t\tonClick=\"ShowURL();\">\n\t\t\t\t</td>\n\t\t\t\t<td align=right COLSPAN=\"2\"><applet\n\t\t\t\t\t\tcode=\"CreditCardApplet.class\" name=\"CreditCardReader\"\n\t\t\t\t\t\tcodebase=\"../CreditCard\" archive=\"CreditCardApplet.jar\" width=\"5\"\n\t\t\t\t\t\theight=\"5\">\n\t\t\t\t\t\t<PARAM name=\"button_width\" value=\"50\" />\n\t\t\t\t\t\t<PARAM name=\"button_height\" value=\"50\" />\n\t\t\t\t\t\t<PARAM name=\"button_label\" value=\"Credit Card\" />\n\t\t\t\t\t\t<PARAM name=\"input_data\"\n\t\t\t\t\t\t\tvalue=\"Transaction_type=debit$!^Amount=0.01$!^ECR_counter=1$!^Application_id=11$!^Refund_rrn=null$!^Menu=null$!^Printer=null$!^Printer_speed=null$!^Machine_port=COM1$!^BoudRate=19200\" />\n\t\t\t\t\t\t<PARAM name=\"application_id\" value=\"SPECTRA\" />\n\t\t\t\t\t\t<param name=\"separate_jvm\" value=\"true\" />\n\t\t\t\t\t\tSorry, Your browser does not support Java applet!\n\t\t\t\t\t</applet> &nbsp;&nbsp;&nbsp;&nbsp; <input class=\"button\" type=\"button\"\n\t\t\t\t\tname=\"Credit Card\" value=\"Credit Card\" onClick=\"getCardData();\">\n\n\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td align=left COLSPAN=\"2\">\n\t\t\t\t\t<!--<input class=\"button\" type=\"button\"  name=\"Eligibility Check\" value=\"Eligibility Check\" onClick=\"getEligibilityCheck();\"> -->\n\t\t\t\t\t<input class=\"textbox\" type=\"textbox\" name=\"PhoneNum\" id=\"PhoneNum\" value=\"\">\n\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp; <input class=\"button\" type=\"button\"\n\t\t\t\t\tname=\"Generate OTP\" value=\"Generate OTP\"\n\t\t\t\t\tonClick=\"validOTPTransaction(\"GENERATE_OTP\");\">\n\t\t\t\t</td>\n\n\t\t\t\t<td align=left COLSPAN=\"2\">\n\t\t\t\t\t<!--<input class=\"button\" type=\"button\"  name=\"Eligibility Check\" value=\"Eligibility Check\" onClick=\"getEligibilityCheck();\"> -->\n\t\t\t\t\t<input class=\"textbox\" type=\"textbox\" name=\"OTP\" id=\"OTP\" value=\"\">\n\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp; <input class=\"button\" type=\"button\"\n\t\t\t\t\tname=\"Validate OTP\" value=\"Validate OTP\"\n\t\t\t\t\tonClick=\"validOTPTransaction(\'VALIDATE_OTP\');\">\n\t\t\t\t</td>\n\n\t\t\t</tr>\n\n\t\t</table>\n\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Practitioner ID</td>\n\t\t\t\t<td align=left COLSPAN=\"2\">\n\t\t\t\t\t<!--<input class=\"button\" type=\"button\"  name=\"Eligibility Check\" value=\"Eligibility Check\" onClick=\"getEligibilityCheck();\"> -->\n\t\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"practitionerid\"\n\t\t\t\t\tname=\"practitionerid\" id=\"practitionerid\" value=\"\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" class=\"label\">Patient ID</td>\n\t\t\t\t<td align=left COLSPAN=\"2\"><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"patientid\" name=\"patientid\" id=\"patientid\" value=\"\">\n\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;</td>\n\n\t\t\t\t<td align=left COLSPAN=\"2\"><input class=\"button\" type=\"button\"\n\t\t\t\t\tname=\"Malaffi Portal\" value=\"Malaffi Portal\"\n\t\t\t\t\tonClick=\"MalaffiPortal(\'MALAFFI\');\"></td>\n\t\t\t</tr>\n\t\t</table>\n\t\t<input type=\"hidden\" name=\"transNo\" id=\"transNo\" id=\"transNo\" VALUE=\"2000\">\n\n\t\t<!--\n\n\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align = \"center\" width=\"800\">\t\n\t\t<tr>\t\n\t\t\t<td width=\"20%\" class=\"label\">Request </td>\n\t\t\t<td width=\"20%\" class=\"fields\"><select id=\"nuhdeekreq\" name=\"nuhdeekreq\" id=\"nuhdeekreq\">\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"COUPON\">GET COUPON</option>\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"HOLD\">HOLD COUPONS</option>\t\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"RELEASE\">RELEASE COUPONS</option>\t\n\t\t\t\t\t\t\t\t\t\t\t  <option value=\"USED\">USED COUPONS</option>\t\n\t\t\t\t\t\t\t\t\t\t\t</select> </td>\t\n\t\t\t<td width=\"20%\" class=\"label\">Patient ID</td>\t\t\t\n\t\t\t<td align=left width=\"20%\">\t\t\t\t\t\n\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"patientid1\"  name=\"patientid1\" id=\"patientid1\" value=\"\"> &nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t</td>\n\t\t\t<td class=\"label\" width=\"20%\"></td>\t\n\t\t</tr>\n\t\t<tr>\t\n\t\t\t<td width=\"20%\" class=\"label\">Coupons</td>\n\t\t\t<td width=\"20%\" align=left >\t\t\t\t\n\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"coupons\" name=\"coupons\" id=\"coupons\" value=\"\"> \n\t\t\t</td>\n\t\t\t<td width=\"20%\" class=\"label\">Trasaction ID</td>\t\t\t\n\t\t\t<td width=\"20%\" align=left >\t\t\t\t\t\n\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"transactionid\"  name=\"transactionid\" id=\"transactionid\" value=\"\"> &nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t</td>\t\t\t\t\n\t\t\t<td width=\"20%\" align=left >\t\t\t\t\t\n\t\t\t\t<input class=\"button\" type=\"button\"  name=\"Nuhdeek\" id=\"Nuhdeek\" value=\"Nuhdeek\" onClick=\"NuhdeekRequest(\'MALAFFI\');\">\n\t\t\t</td>\t\n\t\t</tr>\t\t\n\t</table>\n\n\t-->\n\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Card Reader URI</td>\n\t\t\t\t<td width=\"50%\" align=left><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"websocketuri\" name=\"websocketuri\" id=\"websocketuri\" value=\"\"\n\t\t\t\t\tsize=\"50\"></td>\n\t\t\t\t<td width=\"25%\" align=left><input class=\"button\" type=\"button\"\n\t\t\t\t\tid=\"connect\" name=\"connect\" id=\"connect\" value=\"Get Insurance IDs\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" class=\"label\">Request</td>\n\t\t\t\t<td width=\"50%\" align=left><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"request\" name=\"request\" id=\"request\"\n\t\t\t\t\tvalue=\'{\"message\":\"10028989, 10028990, 10028991\",\t\"sender\":\"client\",\t\"timeStamp\": \"Wed Aug 12 16:55:15 EET 2020\"}\'\n\t\t\t\t\tsize=\"50\"></td>\n\t\t\t\t<td width=\"25%\" align=left><input class=\"button\" type=\"button\"\n\t\t\t\t\tid=\"send\" name=\"send\" id=\"send\" value=\"Send\"></td>\n\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" align=left>Status <!--<input class=\"textbox\" type=\"textbox\" id=\"status\" name=\"status\" id=\"status\" value=\"\"> -->\n\t\t\t\t\t<div id=\"cardStatus\">\n\t\t\t\t\t\t<div></td>\n\t\t\t\t<td width=\"50%\" align=left>Message Received <textarea\n\t\t\t\t\t\tid=\"messagesList\" name=\"messagesList\" rows=\"4\" cols=\"60\" disabled></textarea>\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left>Insurance ID\'s <input class=\"textbox\" type=\"textbox\" id=\"insuranceid\" name=\"insuranceid\" id=\"insuranceid\"\n\t\t\t\t\tvalue=\"\">\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" align=left><input class=\"button\" type=\"button\"\n\t\t\t\t\tid=\"DocumentMode\" name=\"DocumentMode\" id=\"DocumentMode\" value=\"DocumentMode\"\n\t\t\t\t\tonClick=\"getDocumentMode();\"></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"100%\" align=\"Center\" colSpan=\"4\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b>PaySky Payments</b>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">Insurance ID &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"patientId\" name=\"patientId\" id=\"patientId\"\n\t\t\t\t\tvalue=\"12345678\" size=\"12\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">Amount &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"amount\" name=\"amount\" id=\"amount\"\n\t\t\t\t\tvalue=\"150\" size=\"10\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">Transaction ID &nbsp;\n\t\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"transactionId\"\n\t\t\t\t\tname=\"transactionId\" id=\"transactionId\" value=\"101\" size=\"10\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left><input class=\"button\" type=\"button\"\n\t\t\t\t\tid=\"paysky\" name=\"paysky\" id=\"paysky\" value=\"PaySky Payments\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">EM Order ID &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"merchantId\" name=\"merchantId\" id=\"merchantId\"\n\t\t\t\t\tsize=\"12\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">PaySky ID &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"payskyId\" name=\"payskyId\" id=\"payskyId\"\n\t\t\t\t\tsize=\"10\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\" colspan=\"2\">Date &\n\t\t\t\t\tTime&nbsp; <input class=\"textbox\" type=\"textbox\" id=\"datetime\"\n\t\t\t\t\tname=\"datetime\" id=\"datetime\" size=\"10\">\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\n\t\t\t<tr>\n\t\t\t\t<td width=\"12%\" class=\"label\">Request Type</td>\n\t\t\t\t<td width=\"13%\" class=\"fields\"><select id=\"Request_Type\"\n\t\t\t\t\tname=\"Request_Type\" id=\"Request_Type\">\n\t\t\t\t\t\t<option value=\"PHPREAUTH\">PHPREAUTH</option>\n\t\t\t\t\t\t<option value=\"PHDISP\">PHDISP</option>\n\t\t\t\t\t\t<option value=\"PHSTATUS\">PHSTATUS</option>\n\t\t\t\t</select></td>\n\t\t\t\t<td width=\"12%\" class=\"label\">Facility Id</td>\n\t\t\t\t<td align=left width=\"13%\"><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"Facility_Id\" name=\"Facility_Id\" id=\"Facility_Id\" value=\"A1\">\n\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;</td>\n\t\t\t\t<td width=\"12%\" class=\"label\">Dispense Data</td>\n\t\t\t\t<td width=\"38%\" align=left><textarea id=\"Disp_Data\"\n\t\t\t\t\t\tname=\"Disp_Data\" value=\"\" size=\"100\" width=80> </textarea></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"12%\" class=\"label\">Added By ID</td>\n\t\t\t\t<td width=\"13%\" align=left><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"Added_By_id\" name=\"Added_By_id\" id=\"Added_By_id\" value=\"RAO\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"12%\" class=\"label\">Workstation ID</td>\n\t\t\t\t<td width=\"13%\" align=left><input class=\"textbox\"\n\t\t\t\t\ttype=\"textbox\" id=\"Workstation_id\" name=\"Workstation_id\" id=\"Workstation_id\"\n\t\t\t\t\tvalue=\"IN-PF2DPDB7a\"> &nbsp;&nbsp;&nbsp;&nbsp;</td>\n\t\t\t\t<td width=\"50%\" align=left colspan=\"2\"><input class=\"button\"\n\t\t\t\t\ttype=\"button\" id=\"PayerRequest\" value=\"PayerRequest\"\n\t\t\t\t\tonClick=\"PayerRequest()\"></td>\n\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"50%\" align=left colspan=\"2\"><input class=\"button\"\n\t\t\t\t\ttype=\"button\" id=\"CaptureSignature\" Onclick=\'validate_eSignature()\'\n\t\t\t\t\tvalue=\"Capture-Signature\"></td>\n\t\t\t\t<td width=\"50%\" align=left colspan=\"2\">\n\t\t\t\t\t<a href=\"#\" onclick=\"updateAbhaDtls()\"><span\n\t\t\t\t\t\tstyle=\"color: blue; text-decoration: underline;\">Update/Download\n\t\t\t\t\t\t\tABHA Details</span>\n\t\t\t\t\t</a>\n\t\t\t\t</td>\n\t\t\t\t<td width=\"50%\"><a href=\"#\" onclick=\"createSearch()\"><span\n\t\t\t\t\t\tstyle=\"color: blue; text-decoration: underline;\">Link\n\t\t\t\t\t\t\tHealth ID</span></a></td>\n\t\t\t\t<td width=\"50%\"><a href=\"#\" onclick=\"scanShareAbhaDtl()\"><span\n\t\t\t\t\t\tstyle=\"color: blue; text-decoration: underline;\">Scan and Share</span></a></td>\n\t\t\t</tr>\n\n<tr>\n<td>\n<input class=\"button\" type=\"button\"\n\t\t\t\t\tname=\"eligibility_check\" id=\"eligibility_check\" value=\"Eligibility Check\"\n\t\t\t\t\tonClick=\"eligibilityCheck();\">\n\t\t\t\t\t</td>\n</tr>\n<tr>\n<div id=\"tobTableDiv\" name=\"tobTableDiv\"></div>\n</tr>\n\t\t</table>\n\t\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align=\"center\"\n\t\t\twidth=\"800\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"100%\" align=\"Center\" colSpan=\"4\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b>SPECTRA WEB PAYMENTS</b>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"33%\" align=left class=\"label\">Patient ID &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"sPatId\" name=\"sPatId\" id=\"sPatId\"\n\t\t\t\t\tvalue=\"12345\" size=\"15\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"33%\" align=left class=\"label\">Request Type &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"sReqType\" name=\"ReqType\" id=\"ReqType\"\n\t\t\t\t\tvalue=\"RequestPayment\" size=\"15\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"34%\" align=left class=\"label\">Amount &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"sAmount\" name=\"sAmount\" id=\"sAmount\"\n\t\t\t\t\tvalue=\"100\" size=\"15\">\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"40%\" align=left class=\"label\">Web URL &nbsp;\n\t\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"sWeburl\"\n\t\t\t\t\tname=\"sWeburl\" id=\"sWeburl\" value=\"ws://localhost:5000/messages\" size=\"30\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">Machine Port &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"sMport\" name=\"sMport\" id=\"sMport\" value=\"COM3\" \n\t\t\t\t\tsize=\"15\">\n\t\t\t\t</td>\n\t\t\t\t<td width=\"25%\" align=left class=\"label\">Boud Rate &nbsp; <input class=\"textbox\" type=\"textbox\" id=\"sBoudRate\" name=\"sBoudRate\" id=\"sBoudRate\"\n\t\t\t\t\tsize=\"15\" value=\"38400\">\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td width=\"20%\" align=left><input class=\"button\" type=\"button\"\n\t\t\t\t\tid=\"sPayBtn\" name=\"sPayBtn\" id=\"sPayBtn\" value=\"Spectra Payments\" onClick=\"spectraWebPayments()\" >\n\t\t\t\t</td>\n\t\t\t\t<td width=\"80%\" align=\"left\" colSpan=\"3\">\n\t\t\t\t\tResponse Message: &nbsp;\n\t\t\t\t\t<p id=\"sResMsg\" name=\"sResMsg\"></p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<!-- \n\t<table border=\"1\" cellpadding=\"3\" cellspacing=\"0\" align = \"center\" width=\"800\">\t\t\t\n\t\t<tr>\t\t\t\t\t\n\t\t\t<td width=\"50%\" align=left >\t\t\t\t\t\n\t\t\t\t<input class=\"textbox\" type=\"textbox\" id=\"Emirates_Id\"  name=\"Emirates_Id\" id=\"Emirates_Id\" value=\"\"> &nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t</td>\t\t\t\t\n\t\t\t<td width=\"50%\" align=left colspan=\"2\">\t\t\t\t\n\t\t\t\t<input class=\"button\" type=\"button\"  id=\"EmiratesIdBtn\" value=\"EmiratesId\" onClick=\"GetEmiratesId()\">&nbsp;&nbsp;\n\t\t\t\t<applet code=\"CardReaderApplet.class\" name=\"CardReader\"\n\t\t\t\t\tcodebase=\"../../eXH/CardReader/\" archive=\"CardReaderApplet.jar\" width=\"5\"\n\t\t\t\t\theight=\"5\">\n\t\t\t\t\t<PARAM name=\"button_width\" value=\"0\" />\n\t\t\t\t\t<PARAM name=\"button_height\" value=\"0\" />\n\t\t\t\t\t<PARAM name=\"button_label\" value=\"0\" />\t\t\t\t\t\t\n\t\t\t\t\t<param name=\"separate_jvm\" value=\"true\" />\n\t\t\t\t\tSorry, Your browser does not support Java applet!\n\t\t\t\t</applet>\n\t\t\t</td>\n\t\t</tr>\t\n\n\t</table>\n\t -->\n\t\t<input type=\"hidden\" id=\"sigImage\" value=\"\">\n\n\t</form>\n</body>\n</HTML>\n\n";
    private final static byte[]  _wl_block4Bytes = _getBytes( _wl_block4 );

    static private weblogic.jsp.internal.jsp.JspFunctionMapper _jspx_fnmap = weblogic.jsp.internal.jsp.JspFunctionMapper.getInstance();

    public void _jspService(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response) 
    throws javax.servlet.ServletException, java.io.IOException {

        javax.servlet.ServletConfig config = getServletConfig();
        javax.servlet.ServletContext application = config.getServletContext();
        javax.servlet.jsp.tagext.JspTag _activeTag = null;
        java.lang.Object page = this;
        javax.servlet.jsp.PageContext pageContext = javax.servlet.jsp.JspFactory.getDefaultFactory().getPageContext(this, request, response, null, true , 8192 , true );
        response.setHeader("Content-Type", "text/html");
        javax.servlet.jsp.JspWriter out = pageContext.getOut();
        weblogic.servlet.jsp.ByteWriter _bw = (weblogic.servlet.jsp.ByteWriter)out;
        _bw.setInitCharacterEncoding(_WL_ORIGINAL_ENCODING, _WL_ENCODED_BYTES_OK);
        javax.servlet.jsp.JspWriter _originalOut = out;
        javax.servlet.http.HttpSession session = request.getSession( true );
        try {;
            _bw.write(_wl_block0Bytes, _wl_block0);
            _bw.write(_wl_block1Bytes, _wl_block1);
            _bw.write(_wl_block2Bytes, _wl_block2);

	request.setCharacterEncoding("UTF-8");   

	String sStyle =	(session.getAttribute("PREFERRED_STYLE")!=null)||(session.getAttribute("PREFERRED_STYLE")!="")?(String)session.getAttribute("PREFERRED_STYLE"):"IeStyle.css";

	String ip = request.getHeader("x-forwarded-for"); 


	if (ip != null && ip.length() > 0) 
		   System.out.println( " X-FORWARDED-FOR IP Address... "+ip);
	

	if(ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {      
	   ip = request.getHeader("Proxy-Client-IP");

	   if (ip != null && ip.length() > 0) 
		   System.out.println( " PROXY-CLIENT-IP IP Address... "+ip);		 
	}      
	if(ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {      
	   ip = request.getHeader("WL-Proxy-Client-IP");     
	   
	   if (ip != null && ip.length() > 0) 
		   System.out.println( " WL-PROXY-CLIENT-IP IP Address... "+ip);
	}      
	if(ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {      
	   ip = request.getRemoteAddr();  
	   
	   if (ip != null && ip.length() > 0) 
		   System.out.println( " GETREMOTEADDR IP Address... "+ip);
	}  

	System.out.println( " Sethu IP Address... "+ip);

	

	Enumeration<String> headerNames = request.getHeaderNames();
	while(headerNames.hasMoreElements()) {
	  String headerName = headerNames.nextElement();
	  System.out.println("Header Name - " + headerName + ", Value - " + request.getHeader(headerName));
	}

	Enumeration<String> params = request.getParameterNames(); 
	while(params.hasMoreElements()){
	 String paramName = params.nextElement();
	 System.out.println("Parameter Name - "+paramName+", Value - "+request.getParameter(paramName));
	}

	System.out.println(" ***********************************");

	String line = null;
	BufferedReader reader = request.getReader();

	while ((line = reader.readLine()) != null){
		System.out.println(line);
	}

 
            _bw.write(_wl_block3Bytes, _wl_block3);
            out.print( String.valueOf(sStyle));
            _bw.write(_wl_block4Bytes, _wl_block4);
        } catch (java.lang.Throwable __ee){
            if(!(__ee instanceof javax.servlet.jsp.SkipPageException)) {
                while ((out != null) && (out != _originalOut)) out = pageContext.popBody(); 
                _releaseTags(pageContext, _activeTag);
                pageContext.handlePageException(__ee);
            }
        }
    }
}
