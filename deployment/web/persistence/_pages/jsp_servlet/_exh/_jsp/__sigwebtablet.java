package jsp_servlet._exh._jsp;

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import javax.servlet.jsp.tagext.*;

public final class __sigwebtablet extends  weblogic.servlet.jsp.JspBase  implements weblogic.servlet.jsp.StaleIndicator {

    private static void _releaseTags(javax.servlet.jsp.PageContext pageContext, javax.servlet.jsp.tagext.JspTag t) {
        while (t != null) {
            weblogic.servlet.jsp.DependencyInjectionHelper.preDestroy(pageContext, t);
            if(t instanceof javax.servlet.jsp.tagext.Tag) {
                javax.servlet.jsp.tagext.Tag tmp = (javax.servlet.jsp.tagext.Tag)t;
                t = ((javax.servlet.jsp.tagext.Tag) t).getParent();
                try {
                    tmp.release();
                } catch(java.lang.Exception ignore) {}
            }
            else {
                t = ((javax.servlet.jsp.tagext.SimpleTag)t).getParent();
            }
        }
    }

    public boolean _isStale(){
        boolean _stale = _staticIsStale((weblogic.servlet.jsp.StaleChecker) getServletConfig().getServletContext());
        return _stale;
    }

    public static boolean _staticIsStale(weblogic.servlet.jsp.StaleChecker sci) {
        if (sci.isResourceStale("/exh/jsp/SigWebTablet.jsp", 1709117589173L ,"10.3.6.0","Asia/Calcutta")) return true;
        return false;
    }

    private static boolean _WL_ENCODED_BYTES_OK = true;
    private static final java.lang.String _WL_ORIGINAL_ENCODING = "ISO-8859-1".intern();

    private static byte[] _getBytes(java.lang.String block){
        try {
            return block.getBytes(_WL_ORIGINAL_ENCODING);
        } catch (java.io.UnsupportedEncodingException u){
            _WL_ENCODED_BYTES_OK = false;
        }
        return null;
    }

    private final static java.lang.String  _wl_block0 ="<!DOCTYPE html>\n//SigWebTablet JavaScript File for SigWeb\n//\n//Version - 1.0.4.0\n//\n//Last updated by Topaz Systems Inc. - 1/5/2021\n//\n\nvar getBlobURL = (window.URL && URL.createObjectURL.bind(URL)) || (window.webkitURL && webkitURL.createObjectURL.bind(webkitURL)) || window.createObjectURL;\nvar revokeBlobURL = (window.URL && URL.revokeObjectURL.bind(URL)) || (window.webkitURL && webkitURL.revokeObjectURL.bind(webkitURL)) || window.revokeObjectURL;\n\nvar baseUri = makeUri();\nvar\tctx;\n\nfunction IsSigWebInstalled(){\n\tvar xhr = new XMLHttpRequest();\n\ttry{\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState == 4 && xhr.status == 0) {\n\t\t\t\tconsole.log(\"Unknown Error Occured. SigWeb Service response not received.\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\txhr.open(\"GET\", baseUri+\"TabletState\"+\"?noCache=\"+generateUUID(), false);\n\t\txhr.send();\n\t}catch(e){\n\t\tconsole.log(\'catch\', e);\n\t}\n\n\treturn (xhr.status != 404 && xhr.status != 0);\n}\n\nfunction isIE() {\n\n\treturn ((navigator.appName == \'Microsoft Internet Explorer\') || ((navigator.appName == \'Netscape\') && (new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\").exec\n\t(navigator.userAgent) != null)));\n}\n\nfunction isChrome() {\n\tvar ua = navigator.userAgent;\n\tvar chrome = false;\n\n\t//Javascript Browser Detection - Chrome\n\tif (ua.lastIndexOf(\'Chrome/\') > 0) {\n\t\t//var version = ua.substr(ua.lastIndexOf(\'Chrome/\') + 7, 2);\n\t\treturn true;\n\t}\n\telse {\n\t\treturn false;\n\t}\n}\n\nfunction makeUri() {\n\tvar prot = location.protocol;\n\tif(prot == \"file:\")\n\t{\n\t\tprot = \'http:\';\n\t}\n\n\tif (isIE()) {\n\t\tif (prot == \'https:\') {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47290/SigWeb/\");\n\t\t}\n\t\telse {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47289/SigWeb/\");\n\t\t}\n\t}\n\n\tif (isChrome()) {\n\t\tif (prot == \'https:\') {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47290/SigWeb/\");\n\t\t}\n\t\telse {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47289/SigWeb/\");\n\t\t}\n\t}\n\n\telse {\n\t\t//FIREFOX\n\t\tif (prot == \'https:\') {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47290/SigWeb/\");\n\t\t}\n\t\telse {\n\t\t\treturn (prot + \"//tablet.sigwebtablet.com:47289/SigWeb/\");\n\t\t}\n\t}\n}\n\nfunction SigWebcreateXHR() {\n\ttry { return new XMLHttpRequest(); } catch (e) { }\n\ttry { return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\"); } catch (e) { }\n\ttry { return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\"); } catch (e) { }\n\ttry { return new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e) { }\n\ttry { return new ActiveXObject(\"Microsoft.XMLHTTP\"); } catch (e) { }\n\n\talert(\"XMLHttpRequest not supported\");\n\treturn null;\n}\n\nvar Count = false;\n\n\n\nfunction SigWebSetProperty(prop) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop, true);\n\t\txhr.send(null);\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebSetPropertySync(prop) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop, false);\n\t\txhr.send();\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebSetStreamProperty(prop, strm) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop );\n\t\txhr.setRequestHeader(\"Content-Type\", \"text/plain\");\n\t\txhr.send(strm);\n\t\t//\t\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t//\t\t\t\treturn xhr.responseText;\n\t\t//\t\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebSyncSetStreamProperty(prop, strm) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop , false);\n\t\txhr.setRequestHeader(\"Content-Type\", \"text/plain\");\n\t\txhr.send(strm);\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebSetImageStreamProperty(prop, strm) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop, false);\n\t\txhr.setRequestHeader(\"Content-Type\", \"image/png\");\n\t\txhr.send(strm);\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebSetImageBlobProperty(prop, strm) {\n\tvar xhr = SigWebcreateXHR();\n\n\t//\t\t\tvar bb = new BlobBuilder();\n\t//\t\t\tbb.append( strm );\n\t//\t\t\tbb.append( \"\\0\" );\n\t//\t\t\tvar blob = bb.getBlob( );\n\n\tif (xhr) {\n\t\txhr.open(\"POST\", baseUri + prop, false);\n\t\txhr.setRequestHeader(\"Content-Type\", \"blob\");\n\t\txhr.send(strm);\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction SigWebGetProperty(prop) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"GET\", baseUri + prop + \"?noCache=\" + generateUUID(), false );\n\t\txhr.send(null);\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\treturn xhr.responseText;\n\t\t}\n\t}\n\treturn \"\";\n}\n\n\n\nvar SigImageB64;\n\n\n//\tfunction GetSigImageB64(callback)\n//\t\t{\n//\t\tvar cvs = document.createElement(\'canvas\');\n//\t\tcvs.width = GetImageXSize();\n//\t\tcvs.height = GetImageYSize();\n//\n//\t\tvar xhr2 = new XMLHttpRequest();\n//\t\txhr2.open(\"GET\", baseUri + \"SigImage/1\", false);\n//\t\txhr2.responseType = \"blob\";\n//\t\txhr2.send(null);\n//\t\tif (xhr2.readyState == 4 && xhr.status == 200)\n//\t\t\t{\n//\t\t\tvar cntx = cvs.getContext(\'2d\');\n//\t\t\tvar img = new Image();\n//\t\t\timg.src = window.URL.createObjectURL(xhr2.response);\n//\t\t\timg.onload = function ()\n//\t\t\t\t{\n//\t\t\t\tcntx.drawImage(img, 0, 0);\n//\t\t\t\tvar b64String = cvs.toDataURL(\"image/png\");\n//\t\t\t\tvar loc = b64String.search(\"base64,\");\n//\t\t\t\tvar retstring = b64String.slice(loc + 7, b64String.length);\n//\t\t\t\tif (callback)\n//\t\t\t\t\t{\n//\t\t\t\t\tcallback(retstring);\n//\t\t\t\t\t}\n//\t\t\t\t}\n//\t\t\t}\n//\t\t}\n\n\nfunction GetSigImageB64(callback )\n{\n\tvar cvs = document.createElement(\'canvas\');\n\tcvs.width = GetImageXSize();\n\tcvs.height = GetImageYSize();\n\n\tvar xhr2 = new XMLHttpRequest();\n\txhr2.open(\"GET\", baseUri + \"SigImage/1\"  + \"?noCache=\" + generateUUID(), true);\n\txhr2.responseType = \"blob\";\n\txhr2.send(null);\n\txhr2.onload = function ()\n\t{\n\t\tvar cntx = cvs.getContext(\'2d\');\n\t\tvar img = new Image();\n\t\t//\t\t\timg.src = window.URL.createObjectURL(xhr2.response);\n\t\timg.src = getBlobURL(xhr2.response);\n\t\timg.onload = function ()\n\t\t{\n\t\t\tcntx.drawImage(img, 0, 0);\n\t\t\tvar b64String = cvs.toDataURL(\"image/png\");\n\t\t\tvar loc = b64String.search(\"base64,\");\n\t\t\tvar retstring = b64String.slice(loc + 7, b64String.length);\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tcallback(retstring);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n\nfunction SigWebWaitForPenDown(callback) {\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"GET\", baseUri + \"WaitForPenDown\" + \"?noCache=\" + generateUUID());\n\t\txhr.timeout = 10000;\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState != 4)\n\t\t\treturn;\n\t\t\tif (xhr.status == 200)\n\t\t\tcallback();\n\t\t}\n\t\txhr.send(null);\n\t}\n}\n\n\nfunction GetSigImage(ctx) {\n\tvar xhr2 = new XMLHttpRequest();\n\txhr2.open(\"GET\", baseUri + \"SigImage/1\" + \"?noCache=\" + generateUUID(), true);\n\txhr2.responseType = \"blob\";\n\txhr2.send(null);\n\txhr2.onload = function () {\n\t\tvar img = new Image();\n\t\timg.src = getBlobURL(xhr2.response);\n\t\timg.onload = function () {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t\trevokeBlobURL(this.src);\n\t\t\timg = null;\n\t\t}\n\t}\n}\n\nvar EvStatus;\nvar onSigPenDown;\nvar onSigPenUp;\n\nfunction SigWebSetDisplayTarget(obj) {\n\tctx = obj;\n}\n\n\n\n\nvar\t\tNumPointsLastTime = 0;\n\nfunction SigWebRefresh() {\n\tvar NumPoints = NumberOfTabletPoints();\n\tif ( NumPoints == NumPointsLastTime )\n\t{\n\t\treturn;\n\t}\n\tNumPointsLastTime = NumPoints;\n\n\tvar xhr2 = new XMLHttpRequest();\n\txhr2.open(\"GET\", baseUri + \"SigImage/0\" + \"?noCache=\" + generateUUID(), true);\n\txhr2.responseType = \"blob\"\n\txhr2.onload = function () {\n\t\tvar img = new Image();\n\t\timg.src = getBlobURL(xhr2.response);\n\t\t//\t\t\t\timg.src = window.URL.createObjectURL(xhr2.response);\n\t\timg.onload = function () {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t\trevokeBlobURL(this.src);\n\t\t\timg = null;\n\t\t}\n\t}\n\txhr2.send(null);\n}\n\n\nfunction SigWebEvent() {\n\tvar OldEvStatus = EvStatus;\n\n\tvar xhr = SigWebcreateXHR();\n\n\tif (xhr) {\n\t\txhr.open(\"GET\", baseUri + \"EventStatus\" + \"?noCache=\" + generateUUID(), true);\n\t\txhr.onload = function () {\n\t\t\tEvStatus = xhr.responseText\n\t\t\tif ((OldEvStatus & 0x01) && (EvStatus & 0x02)) {\n\t\t\t\tif (onSigPenDown) {\n\t\t\t\t\tonSigPenDown();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((OldEvStatus & 0x02) && (EvStatus & 0x01)) {\n\t\t\t\tif (onSigPenUp) {\n\t\t\t\t\tonSigPenUp();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\txhr.send(null);\n\t}\n}\n\nfunction generateUUID() {\n\tvar d = new Date().getTime();\n\tif (typeof performance !== \'undefined\' && typeof performance.now === \'function\'){\n\t\td += performance.now(); //use high-precision timer if available\n\t}\n\treturn \'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\'.replace(/[xy]/g, function (c) {\n\t\tvar r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c === \'x\' ? r : (r & 0x3 | 0x8)).toString(16);\n\t});\n}\n\n\nvar SigWebFontThreshold = 155;\n\nfunction setSigWebFontThreshold(v) {\n\tSigWebFontThreshold = v;\n}\n\n\n\nfunction createLcdBitmapFromCanvas(ourCanvas, xp, yp, width, height) {\n\tvar canvasCtx = ourCanvas.getContext(\'2d\');\n\tvar imgData = canvasCtx.getImageData(0, 0, width, height);\n\tvar j = 0;\n\tvar sVal = 0;\n\tvar outData = \"\";\n\tvar outIdx = 0;\n\tvar data = imgData.data;\n\n\tfor (var y = 0; y < height; y++)\n\tfor (var x = 0; x < width; x++) {\n\t\tvar tmp1 = data[j];\n\t\tvar tmp2 = data[j + 1];\n\t\tvar tmp3 = data[j + 2];\n\t\tvar tmp4 = data[j + 3];\n\n\t\t//\t\t\t\t\tsVal = tmp1 + (tmp2 << 8 ) + ( tmp3 << 16 ) + (tmp4 << 24 );\n\t\tj = j + 4;\n\t\tif (tmp1 < SigWebFontThreshold) {\n\t\t\toutData += \"B\";\n\t\t}\n\t\telse {\n\t\t\toutData += \"W\";\n\t\t}\n\t}\n\n\treturn outData;\n}\n\n\nfunction toHex(NibVal) {\n\tswitch (NibVal) {\n\t\tcase 0:\n\t\treturn \"0\";\n\t\tcase 1:\n\t\treturn \"1\";\n\t\tcase 2:\n\t\treturn \"2\";\n\t\tcase 3:\n\t\treturn \"3\";\n\t\tcase 4:\n\t\treturn \"4\";\n\t\tcase 5:\n\t\treturn \"5\";\n\t\tcase 6:\n\t\treturn \"6\";\n\t\tcase 7:\n\t\treturn \"7\";\n\t\tcase 8:\n\t\treturn \"8\";\n\t\tcase 9:\n\t\treturn \"9\";\n\t\tcase 10:\n\t\treturn \"A\";\n\t\tcase 11:\n\t\treturn \"B\";\n\t\tcase 12:\n\t\treturn \"C\";\n\t\tcase 13:\n\t\treturn \"D\";\n\t\tcase 14:\n\t\treturn \"E\";\n\t\tcase 15:\n\t\treturn \"F\";\n\t}\n}\n\nfunction ToHexString(ByteVal) {\n\tvar Str = \"\";\n\tStr += toHex((ByteVal >> 4) & 0x0f);\n\tStr += toHex(ByteVal & 0x0F);\n\treturn Str\n}\n\n\n\n\n\nfunction textToTablet(x, y, height, str, fnt) {\n\tvar c = document.createElement(\'canvas\');\n\tvar cntx = c.getContext(\'2d\');\n\tcntx.font = fnt;\n\tvar txt = str;\n\tvar xs = Math.round(cntx.measureText(txt).width);\n\tvar ys = height;\n\tc.width = xs;\n\tc.height = ys;\n\n\tcntx.font = fnt;\n\tcntx.fillStyle = \'#FFFFFF\'\n\tcntx.rect(0, 0, xs, ys);\n\tcntx.fill();\n\n\n\tcntx.fillStyle = \'#000000\'\n\tcntx.textBaseline = \"top\";\n\tcntx.fillText(txt, 0, 0);\n\n\tcntx.drawImage(cntx.canvas, 0, 0, xs, ys);\n\n\tvar Gstr = createLcdBitmapFromCanvas(c, 0, 0, xs, ys)\n\n\tLcdWriteImageStream(0, 2, x, y, xs, ys, Gstr);\n}\n\nfunction LcdWriteImage(Dst, Mode, Xp, Yp, Url) {\n\tvar Prop = \"LcdWriteImage/\";\n\tvar NewUrl = Url.replace(/\\//g, \"_\");\n\n\t\tProp = Prop + Dst + \",\" + Mode + \",\" + Xp + \",\" + Yp + \",\" + NewUrl;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction LcdWriteLocalImage(Dst, Mode, Xp, Yp, Url) {\n\t\tvar Prop = \"LcdWriteImage/\";\n\n\t\tProp = Prop + Dst + \",\" + Mode + \",\" + Xp + \",\" + Yp + \",\" + Url;\n\t\tSigWebSetProperty(Prop);\n\t}\n\n\tfunction LcdWriteImageStream(Dst, Mode, Xp, Yp, Xs, Ys, Url) {\n\t\tvar Prop1 = \"LcdWriteImageStreamParams/\" + Dst + \",\" + Mode + \",\" + Xp + \",\" + Yp + \",\" + Xs + \",\" + Ys;\n\t\tvar Prop2 = \"LcdWriteImageStream/\";\n\n\t\tSigWebSetPropertySync(Prop1);\n\t\tSigWebSetImageStreamProperty(Prop2, Url);\n\t}\n\n\tfunction LcdWriteImageBlob(Dst, Mode, Xp, Yp, Xs, Ys, Url) {\n\t\tvar Prop = \"LcdWriteImageStream/\";\n\n\t\tProp = Prop + Dst + \",\" + Mode + \",\" + Xp + \",\" + Yp + \",\" + Xs + \",\" + Ys;\n\t\tSigWebSetImageBlobProperty(Prop, Url);\n\t}\n\n\n\n\tfunction measureText(pText, pFontSize, pStyle) {\n\t\tvar lDiv = document.createElement(\'lDiv\');\n\n\t\tdocument.body.appendChild(lDiv);\n\n\t\tif (pStyle != null) {\n\t\t\tlDiv.style = pStyle;\n\t\t}\n\t\tlDiv.style.fontSize = \"\" + pFontSize + \"px\";\n\t\tlDiv.style.position = \"absolute\";\n\t\tlDiv.style.left = -1000;\n\t\tlDiv.style.top = -1000;\n\n\t\tlDiv.innerHTML = pText;\n\n\t\tvar lResult =\n\t\t{\n\t\t\twidth: lDiv.clientWidth,\n\t\t\theight: lDiv.clientHeight\n\t\t};\n\n\t\tdocument.body.removeChild(lDiv);\n\t\tlDiv = null;\n\n\t\treturn lResult;\n\t}\n\n\tfunction GetSigWebVersion(){\n\t\tvar prop = \"SigWebVersion\";\n\n\t\tvar xhr = SigWebcreateXHR();\n\n\t\tif (xhr) {\n\t\t\txhr.open(\"GET\", baseUri + prop + \"?noCache=\" + generateUUID(), false );\n\t\t\txhr.send(null);\n\t\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\t\t\t\treturn xhr.responseText.slice(1, xhr.responseText.length - 1);\n\t\t\t} else{\n\t\t\t\treturn \"1.5\"; //the currentversion of the SigWeb service is not installed\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t//\n\t//\n\t//\n\t//\n\t//\n\t//\n\t//\t\t\tStart of dll method wrappers\n\t//\n\t//\n\t//\t\t\tSigPlusNET.cs\n\t//\n\tfunction GetVersionString() {\n\t\tvar Prop = \"Version\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\t\tvar trimStr = Str.slice(1, Str.length - 2);\n\t\treturn trimStr;\n\t}\n\n\n\tfunction IsPenDown() {\n\t\treturn EvStatus & 0x01;\n\t}\n\n\tfunction GetDaysUntilCertificateExpires() {\n\t\tvar Prop = \"DaysUntilCertificateExpires\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\t//\n\t//\t\t\tSigPlusNETSig.cs\n\t//\n\tfunction ClearTablet() {\n\t\tvar Prop = \"ClearSignature\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction NumberOfTabletPoints() {\n\t\tvar Prop = \"TotalPoints\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\t//\t\tfunction  ExportSigFile(  FileName ) {}\n\t//\t\tfunction  ImportSigFile(  FileName ) {}\n\n\tfunction SetSigString(sigStr, ctx)\n\t{\n\t\tvar Prop = \"SigString\";\n\n\t\tProp = Prop;\n\t\tvar xhr = SigWebcreateXHR();\n\n\t\tif (xhr)\n\t\t{\n\t\t\txhr.open(\"POST\", baseUri + Prop );\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"text/plain\");\n\t\t\txhr.send(sigStr);\n\t\t\txhr.onload = function ()\n\t\t\t{\n\t\t\t\tif (ctx)\n\t\t\t\t{\n\t\t\t\t\tvar can = ctx.canvas;\n\t\t\t\t\tSetImageXSize( can.width );\n\t\t\t\t\tSetImageYSize( can.height );\n\t\t\t\t\tGetSigImage(ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\n\n\tfunction GetSigString() {\n\t\tvar Prop = \"SigString\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\n\tfunction SetSigCompressionMode(v) {\n\t\tvar Prop = \"CompressionMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction GetSigCompressionMode() {\n\t\tvar Prop = \"CompressionMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\n\tfunction SetEncryptionMode(v) {\n\t\tvar Prop = \"EncryptionMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction GetEncryptionMode() {\n\t\tvar Prop = \"EncryptionMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\t//\t\tfunction  SetKey( Keydata ) {}\n\t//\t\tfunction  GetKey( ) {}\n\n\tfunction SetKeyString(keyString) {\n\t\tvar Prop = \"KeyString\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, keyString);\n\t}\n\n\n\tfunction GetKeyString() {\n\t\tvar Prop = \"KeyString\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\n\tfunction AutoKeyStart() {\n\t\tvar Prop = \"AutoKeyStart\";\n\n\t\tProp = Prop;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction AutoKeyFinish() {\n\t\tvar Prop = \"AutoKeyFinish\";\n\n\t\tProp = Prop;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetAutoKeyData(keyData) {\n\t\tvar Prop = \"SetAutoKeyData\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, keyData);\n\t}\n\n\n\tfunction AutoKeyAddData(keyData) {\n\t\tvar Prop = \"AutoKeyAddData\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, keyData);\n\t\treturn GetKeyString();\n\t}\n\n\tfunction AutoKeyAddANSIData(keyData) {\n\t\tvar Prop = \"AutoKeyAddANSIData\";\n\n\t\tProp = Prop;\n\t\tvar isASCII = SigWebSyncSetStreamProperty(Prop, keyData);\n\t\treturn isASCII;\n\t}\n\n\t//\t\tfunction  GetKeyReceipt( ) {}\n\n\tfunction GetKeyReceiptAscii() {\n\t\tvar Prop = \"KeyReceiptAscii\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\t//\t\tfunction  GetSigReceipt( ) {}\n\n\tfunction GetSigReceiptAscii() {\n\t\tvar Prop = \"SigReceiptAscii\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\tfunction SetTimeStamp(timeStamp) {\n\t\tvar Prop = \"TimeStamp\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, timeStamp);\n\t}\n\n\tfunction GetTimeStamp() {\n\t\tvar Prop = \"TimeStamp\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\tfunction SetAnnotate(annotate) {\n\t\tvar Prop = \"Annotate\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, annotate);\n\t}\n\n\n\tfunction GetAnnotate() {\n\t\tvar Prop = \"Annotate\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\tfunction SetSaveSigInfo(v) {\n\t\tvar Prop = \"SaveSigInfo/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetSaveSigInfo() {\n\t\tvar Prop = \"SaveSigInfo\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetSavePressureData(v) {\n\t\tvar Prop = \"SavePressureData/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetSavePressureData() {\n\t\tvar Prop = \"SavePressureData\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetSaveTimeData(v) {\n\t\tvar Prop = \"SaveTimeData/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetSaveTimeData() {\n\t\tvar Prop = \"SaveTimeData\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetAntiAliasSpotSize(v) {\n\t\tvar Prop = \"AntiAliasSpotSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetAntiAliasSpotSize() {\n\t\tvar Prop = \"AntiAliasSpotSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetAntiAliasLineScale(v) {\n\t\tvar Prop = \"AntiAliasLineScale/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetAntiAliasLineScale() {\n\t\tvar Prop = \"AntiAliasLineScale\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetNumberOfStrokes() {\n\t\tvar Prop = \"NumberOfStrokes\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetNumPointsForStroke(v) {\n\t\tvar Prop = \"NumberOfPointsInStroke/\";\n\n\t\tProp = Prop + v;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetPointXValue(v1, v2) {\n\t\tvar Prop = \"PointXValue/\";\n\n\t\tProp = Prop + v1 + \"/\" + v2;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetPointYValue(v1, v2) {\n\t\tvar Prop = \"PointYValue/\";\n\n\t\tProp = Prop + v1 + \"/\" + v2;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\n\tfunction SetAntiAliasEnable(v) {\n\t\tvar Prop = \"AntiAliasEnable/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetAntiAliasEnable() {\n\t\tvar Prop = \"AntiAliasEnable\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetUseAmbientColors(v) {\n\t\tvar Prop = \"UseAmbientColors/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\t//\n\t//\t\tSigPlusNETDisplay.cs\n\t//\n\tfunction SetDisplayXSize(v) {\n\t\tvar Prop = \"DisplayXSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayXSize() {\n\t\tvar Prop = \"DisplayXSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayYSize(v) {\n\t\tvar Prop = \"DisplayYSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayYSize() {\n\t\tvar Prop = \"DisplayYSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\tfunction SetDisplayPenWidth(v) {\n\t\tvar Prop = \"DisplayPenWidth/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction GetDisplayPenWidth() {\n\t\tvar Prop = \"DisplayPenWidth\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayTimeStamp(v) {\n\t\tvar Prop = \"DisplayTimeStamp/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayTimeStamp() {\n\t\tvar Prop = \"DisplayTimeStamp\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayTimeStampPosX(v) {\n\t\tvar Prop = \"DisplayTimeStampPosX/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayTimeStampPosX() {\n\t\tvar Prop = \"DisplayTimeStampPosX\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayTimeStampPosY(v) {\n\t\tvar Prop = \"DisplayTimeStampPosY/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayTimeStampPosY() {\n\t\tvar Prop = \"DisplayTimeStampPosY\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayTimeStampSize(v) {\n\t\tvar Prop = \"DisplayTimeStampSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayTimeStampSize() {\n\t\tvar Prop = \"DisplayTimeStampSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayAnnotate(v) {\n\t\tvar Prop = \"DisplayAnnotate/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayAnnotate() {\n\t\tvar Prop = \"DisplayAnnotate\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayAnnotatePosX(v) {\n\t\tvar Prop = \"DisplayAnnotatePosX/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayAnnotatePosX() {\n\t\tvar Prop = \"DisplayAnnotatePosX\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayAnnotatePosY(v) {\n\t\tvar Prop = \"DisplayAnnotatePosY/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayAnnotatePosY() {\n\t\tvar Prop = \"DisplayAnnotatePosY\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetDisplayAnnotateSize(v) {\n\t\tvar Prop = \"DisplayAnnotateSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetDisplayAnnotateSize() {\n\t\tvar Prop = \"DisplayAnnotateSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\t//\n\t//\t\tSigPlusNETImage.cs\n\t//\n\t//\t\tfunction  GetSigImageB64( )\n\t//\t\t\t{\n\t//\t\t\tvar xhr2 = new XMLHttpRequest();\n\t//\t\t\txhr2.open(\"GET\", baseUri + \"SigImage/1\", false );\n\t//\t\t\txhr2.responseType = \"blob\"\n\t//\t\t\txhr2.send(null);\n\t//\t\t\tif (xhr2.readyState == 4 && xhr.status == 200)\n\t//\t\t\t\t{\n\t//\t\t\t\treturn window.URL.createObjectURL(xhr2.response);\n\t//\t\t\t\t}\n\t//\t\t\treturn null;\n\t//\t\t\t}\n\n\tfunction SetImageXSize(v) {\n\t\tvar Prop = \"ImageXSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageXSize() {\n\t\tvar Prop = \"ImageXSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageYSize(v) {\n\t\tvar Prop = \"ImageYSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageYSize() {\n\t\tvar Prop = \"ImageYSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImagePenWidth(v) {\n\t\tvar Prop = \"ImagePenWidth/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImagePenWidth() {\n\t\tvar Prop = \"ImagePenWidth\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageTimeStamp(v) {\n\t\tvar Prop = \"ImageTimeStamp/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageTimeStamp() {\n\t\tvar Prop = \"ImageTimeStamp\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageTimeStampPosX(v) {\n\t\tvar Prop = \"ImageTimeStampPosX/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageTimeStampPosX() {\n\t\tvar Prop = \"ImageTimeStampPosX\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageTimeStampPosY(v) {\n\t\tvar Prop = \"ImageTimeStampPosY/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageTimeStampPosY() {\n\t\tvar Prop = \"ImageTimeStampPosY\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageTimeStampSize(v) {\n\t\tvar Prop = \"ImageTimeStampSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageTimeStampSize() {\n\t\tvar Prop = \"ImageTimeStampSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageAnnotate(v) {\n\t\tvar Prop = \"ImageAnnotate/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageAnnotate() {\n\t\tvar Prop = \"ImageAnnotate\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageAnnotatePosX(v) {\n\t\tvar Prop = \"ImageAnnotatePosX/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageAnnotatePosX() {\n\t\tvar Prop = \"ImageAnnotatePosX\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageAnnotatePosY(v) {\n\t\tvar Prop = \"ImageAnnotatePosY/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageAnnotatePosY() {\n\t\tvar Prop = \"ImageAnnotatePosY\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetImageAnnotateSize(v) {\n\t\tvar Prop = \"ImageAnnotateSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetImageAnnotateSize() {\n\t\tvar Prop = \"ImageAnnotateSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetJustifyX(v) {\n\t\tvar Prop = \"JustifyX/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetJustifyX() {\n\t\tvar Prop = \"JustifyX\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetJustifyY(v) {\n\t\tvar Prop = \"JustifyY/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetJustifyY() {\n\t\tvar Prop = \"JustifyY\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetJustifyMode(v) {\n\t\tvar Prop = \"JustifyMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetJustifyMode() {\n\t\tvar Prop = \"JustifyMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\t//\n\t//\t\tSigPlusNETKeyPad.cs\n\t//\n\tfunction KeyPadAddHotSpot(key, coord, xp, yp, xs, ys) {\n\t\tvar Prop = \"KeyPadAddHotSpot/\";\n\t\tProp = Prop + key + \",\" + coord + \",\" + xp + \",\" + yp + \",\" + xs + \",\" + ys;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction KeyPadMarkHotSpot(key, coord, xp, yp, xs, ys) {\n\t\tLCDWriteString(0, 2, xp, yp, \"16pt sans-serif\", 32, \"+\")\n\t\tLCDWriteString(0, 2, xp + xs, yp, \"16pt sans-serif\", 32, \"+\")\n\t\tLCDWriteString(0, 2, xp, yp + ys, \"16pt sans-serif\", 32, \"+\")\n\t\tLCDWriteString(0, 2, xp + xs, yp + ys, \"16pt sans-serif\", 32, \"+\")\n\t}\n\n\tfunction KeyPadQueryHotSpot(key) {\n\t\tvar Prop = \"KeyPadQueryHotSpot/\";\n\t\tProp = Prop + key;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction KeyPadClearHotSpotList() {\n\t\tvar Prop = \"KeyPadClearHotSpotList\";\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetSigWindow(coords, xp, yp, xs, ys) {\n\t\tvar Prop = \"SigWindow/\";\n\n\t\tProp = Prop + coords + \",\" + xp + \",\" + yp + \",\" + xs + \",\" + ys;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction ClearSigWindow(inside) {\n\t\tvar Prop = \"ClearSigWindow/\";\n\t\tProp = Prop + inside;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\t//\n\t//\t\tSigPlusNETLCD.cs\n\t//\n\tfunction SetLCDCaptureMode(v) {\n\t\tvar Prop = \"CaptureMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction GetLCDCaptureMode() {\n\t\tvar Prop = \"CaptureMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction LCDSetWindow(xP, yP, xS, yS) {\n\t\tvar Prop = \"LCDSetWindow/\";\n\t\tProp = Prop + xP + \",\" + yP + \",\" + xS + \",\" + yS;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction LCDWriteString(dest, mode, x, y, fnt, size, str) {\n\t\tvar c = document.createElement(\'canvas\');\n\t\tvar cntx = c.getContext(\'2d\');\n\t\tcntx.font = fnt;\n\t\tvar txt = str;\n\t\tvar xs = Math.round(cntx.measureText(txt).width);\n\t\tvar ys = size;\n\t\tc.width = xs;\n\t\tc.height = ys;\n\n\t\tif ( xs == 0 )\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcntx.font = fnt;\n\t\tcntx.fillStyle = \'#FFFFFF\'\n\t\tcntx.rect(0, 0, xs, ys);\n\t\tcntx.fill();\n\n\n\t\tcntx.fillStyle = \'#000000\'\n\t\tcntx.textBaseline = \"top\";\n\t\tcntx.fillText(txt, 0, 0);\n\n\t\tcntx.drawImage(cntx.canvas, 0, 0, xs, ys);\n\n\t\tvar Gstr = createLcdBitmapFromCanvas(c, x, y, xs, ys);\n\n\t\tLcdWriteImageStream(dest, mode, x, y, xs, ys, Gstr);\n\t}\n\n\n\tfunction LCDDrawRectangle(dest, mode, x, y, xs, ys, fill) {\n\t\tvar c = document.createElement(\'canvas\');\n\t\tvar cntx = c.getContext(\'2d\');\n\n\t\tc.width = xs;\n\t\tc.height = ys;\n\n\n\t\tcntx.fillStyle = fill\n\t\tcntx.rect(0, 0, xs, ys);\n\t\tcntx.fill();\n\n\t\tcntx.drawImage(cntx.canvas, 0, 0, xs, ys);\n\t\tvar Gstr = createLcdBitmapFromCanvas(c, x, y, xs, ys);\n\t\tLcdWriteImageBlob(dest, mode, x, y, xs, ys, Gstr);\n\t}\n\n\n\tfunction LCDDrawButton(dest, mode, x, y, xs, ys, strys, fill, fnt, str) {\n\t\tvar c = document.createElement(\'canvas\');\n\t\tvar cntx = c.getContext(\'2d\');\n\t\tcntx.font = fnt;\n\t\tvar txt = str;\n\t\tvar sxs = Math.round(cntx.measureText(txt).width);\n\t\tvar sys = strys;\n\t\tc.width = xs;\n\t\tc.height = ys;\n\n\t\tcntx.font = fnt;\n\t\tcntx.fillStyle = fill\n\t\tcntx.rect(0, 0, xs, ys);\n\t\tcntx.fill();\n\n\n\t\tcntx.fillStyle = \'#FFFFFF\'\n\t\tcntx.textBaseline = \"top\";\n\t\tcntx.fillText(txt, ((xs - sxs) / 2), ((ys - sys) / 2));\n\n\t\tcntx.drawImage(cntx.canvas, 0, 0, xs, ys);\n\n\t\tvar Gstr = createLcdBitmapFromCanvas(c, x, y, xs, ys);\n\n\t\tLcdWriteImageBlob(dest, mode, x, y, xs, ys, Gstr);\n\t}\n\n\n\n\tfunction LCDWriteStringWindow(dest, mode, x, y, fnt, xsize, ysize, str) {\n\t\tvar c = document.createElement(\'canvas\');\n\t\tvar cntx = c.getContext(\'2d\');\n\t\tcntx.font = fnt;\n\t\tvar txt = str;\n\t\tvar xs = xsize;\n\t\tvar ys = ysize;\n\t\tc.width = xs;\n\t\tc.height = ys;\n\n\t\tcntx.font = fnt;\n\t\tcntx.fillStyle = \'#FFFFFF\'\n\t\tcntx.rect(0, 0, xs, ys);\n\t\tcntx.fill();\n\n\n\t\tcntx.fillStyle = \'#000000\'\n\t\tcntx.textBaseline = \"top\";\n\t\tcntx.fillText(txt, 0, 0);\n\n\t\tcntx.drawImage(cntx.canvas, 0, 0, xs, ys);\n\n\t\tvar Gstr = createLcdBitmapFromCanvas(c, x, y, xs, ys);\n\n\t\tLcdWriteImageBlob(dest, mode, x, y, xs, ys, Gstr);\n\t}\n\n\n\tfunction LCDStringWidth(fnt, str) {\n\t\tvar c = document.createElement(\'canvas\');\n\t\tvar cntx = c.getContext(\'2d\');\n\t\tcntx.font = fnt;\n\t\tvar txt = str;\n\t\tvar xs = Math.round(cntx.measureText(txt).width);\n\n\t\treturn xs;\n\t}\n\n\n\tfunction LCDStringHeight(fnt, str) {\n\t\treturn 16;\n\t}\n\n\tfunction LcdRefresh(Mode, Xp, Yp, Xs, Ys) {\n\t\tvar Prop = \"LcdRefresh/\";\n\n\t\tProp = Prop + Mode + \",\" + Xp + \",\" + Yp + \",\" + Xs + \",\" + Ys;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction LCDSendCmdString(CmdStr, ReturnCount, Result, TimeOut) {\n\t\tvar Prop = \"LcdSendCmdString/\";\n\n\t\tProp = Prop + ReturnCount + \",\" + TimeOut;\n\t\tResult = SigWebSetStreamProperty(Prop, CmdStr);\n\t}\n\n\tfunction LCDSendCmdData(CmdStr, ReturnCount, Result, TimeOut) {\n\t\tvar Prop = \"LcdSendCmdData/\";\n\n\t\tProp = Prop + ReturnCount + \",\" + TimeOut;\n\t\tResult = SigWebSetStreamProperty(Prop, CmdStr);\n\t}\n\n\n\tfunction LCDSendGraphicCanvas(dest, mode, x, y, canvas) {\n\t\tvar Gstr = createLcdBitmapFromCanvas(canvas, 0, 0, xs, ys)\n\t\tLcdWriteImageStream(dest, mode, x, y, canvas.width, canvas.height, Gstr);\n\t}\n\n\n\t//\t\tfunction  LCDSendWindowedGraphicCanvas(  dest, mode,  x,  y, canvas )\n\t//\t\t\t {\n\t//\t\t\t }\n\n\n\t//\t\tfunction  LCDSendWindowedGraphicCanvas(  dest, mode,  x,  y,  xs,  ys, canvas )\n\t//\t\t\t{\n\t//\t\t\tvar Gstr = createLcdBitmapFromCanvas( canvas, 0, 0, xs, ys)\n\t//\t\t\tLcdWriteImageStream( dest, mode, x, y, xs, ys, Gstr );\n\t//\t\t\t}\n\n\n\tfunction LCDSendWindowedGraphicCanvas(dest, mode, x, y, xs, ys, c, xps, yps) {\n\t\tvar Gstr = createLcdBitmapFromCanvas(canvas, xps, yps, xs, ys)\n\t\tLcdWriteImageStream(dest, mode, x, y, xs, ys, Gstr);\n\t}\n\n\n\n\tfunction LCDSendGraphicUrl(dest, mode, x, y, url) {\n\t\tLcdWriteImage(dest, mode, x, y, url)\n\t}\n\n\t//\t\tfunction  LCDSendWindowedGraphicUrl(  dest, mode,  X,  Y, url )\n\t//\t\t\t{\n\t//\t\t\t}\n\n\t//\t\tfunction  LCDSendWindowedGraphicUrl(  dest, mode,  x,  y,  xs,  ys, url )\n\t//\t\t\t{\n\t//\t\t\tLcdWriteImageStream(dest, mode, x, y, xs, ys, url);\n\t//\t\t\t}\n\n\tfunction LCDSendWindowedGraphicUrl(dest, mode, x, y, xse, yse, url, xps, yps) {\n\t\tLcdWriteImageStream(dest, mode, x, y, xs, ys, url);\n\t}\n\n\n\t//\t\tfunction  LCDSendGraphic(  Dest,  Mode,  XPos,  YPos,  ImageFileName ) {}\n\t//\t\tfunction  LCDSendGraphicURL(  Dest,  Mode,  XPos,  YPos,  URL ) {}\n\n\tfunction LCDClear() {\n\t\tvar Prop = \"LcdClear\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction LCDSetTabletMap(LCDType, LCDXSize, LCDYSize, LCDXStart, LCDYStart, LCDXStop, LCDYStop) {\n\t}\n\n\n\tfunction LCDSetPixelDepth(v) {\n\t\tvar Prop = \"LcdSetPixelDepth/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction LCDGetLCDSize() {\n\t\tvar Prop = \"LcdGetLcdSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction LCDSetCompressionMode(NewMode) {\n\t\tvar Prop = \"LcdCompressionMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction LCDGetCompressionMode() {\n\t\tvar Prop = \"LcdCompressionMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction LCDSetZCompressionMode(NewMode) {\n\t\tvar Prop = \"LcdZCompressionMode/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction LCDGetZCompressionMode() {\n\t\tvar Prop = \"LcdZCompressionMode\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\t//\n\t//\t\tSigPlusNETLCD.cs\n\t//\n\n\n\tfunction SetRealTabletState(v) {\n\t\tvar Prop = \"TabletState/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletState() {\n\t\tvar Prop = \"TabletState\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\n\n\tfunction SetTabletLogicalXSize(v) {\n\t\tvar Prop = \"TabletLogicalXSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletLogicalXSize() {\n\t\tvar Prop = \"TabletLogicalXSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetTabletLogicalYSize() {\n\t\tvar Prop = \"TabletLogicalYSize\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletLogicalYSize(v) {\n\t\tvar Prop = \"TabletLogicalYSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetTabletXStart(v) {\n\t\tvar Prop = \"TabletXStart/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletXStart() {\n\t\tvar Prop = \"TabletXStart\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletYStart(v) {\n\t\tvar Prop = \"TabletYStart/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletYStart() {\n\t\tvar Prop = \"TabletYStart\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletXStop(v) {\n\t\tvar Prop = \"TabletXStop/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletXStop() {\n\t\tvar Prop = \"TabletXStop\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletYStop(v) {\n\t\tvar Prop = \"TabletYStop/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletYStop() {\n\t\tvar Prop = \"TabletYStop\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletFilterPoints(v) {\n\t\tvar Prop = \"TabletFilterPoints/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletFilterPoints() {\n\t\tvar Prop = \"TabletFilterPoints\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletTimingAdvance(v) {\n\t\tvar Prop = \"TabletTimingAdvance/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletTimingAdvance() {\n\t\tvar Prop = \"TabletTimingAdvance\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletComPort(v) {\n\t\tvar Prop = \"TabletComPort/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletComPort() {\n\t\tvar Prop = \"TabletComPort\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletBaudRate(v) {\n\t\tvar Prop = \"TabletBaudRate/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletBaudRate() {\n\t\tvar Prop = \"TabletBaudRate\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletRotation(v) {\n\t\tvar Prop = \"TabletRotation/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletRotation() {\n\t\tvar Prop = \"TabletRotation\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletType(v) {\n\t\tvar Prop = \"TabletType/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction GetTabletType() {\n\t\tvar Prop = \"TabletType\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetServerTabletType(v) {\n\t\tvar Prop = \"ServerTabletType/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetServerTabletType() {\n\t\tvar Prop = \"ServerTabletType\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletComTest(v) {\n\t\tvar Prop = \"TabletComTest/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletComTest() {\n\t\tvar Prop = \"TabletComTest\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletResolution(v) {\n\t\tvar Prop = \"TabletResolution/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetTabletResolution() {\n\t\tvar Prop = \"TabletResolution\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction TabletConnectQuery() {\n\t\tvar Prop = \"TabletConnectQuery\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction TabletModelNumber() {\n\t\tvar Prop = \"TabletModelNumber\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction TabletSerialNumber() {\n\t\tvar Prop = \"TabletSerialNumber\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetTabletPortPath(v) {\n\t\tvar Prop = \"TabletPortPath/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetTabletLocalIniFilePath(v) {\n\t\tvar Prop = \"TabletLocalIniFilePath/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetTabletModel(v) {\n\t\tvar Prop = \"TabletModel/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetSerialPortCloseDelay(v) {\n\t\tvar Prop = \"SerialPortCloseDelay/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetSerialPortCloseDelay() {\n\t\tvar Prop = \"SerialPortCloseDelay\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction EnableTabletEncryption() {\n\t\tvar Prop = \"EnableTabletEncryption\";\n\n\t\tProp = Prop;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetTabletEncryptionMode(hmode, tmode) {\n\t\tvar Prop = \"TabletEncryptionMode/\";\n\n\t\tProp = Prop + hmode + \",\" + tmode;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetMaxLogFileSize(v) {\n\t\tvar Prop = \"MaxLogFileSize/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetSigSockServerPath() {\n\t\tvar Prop = \"SigSockServerPath\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetSigSockClientName() {\n\t\tvar Prop = \"SigSockClientName\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction GetSigSockPortNumber() {\n\t\tvar Prop = \"SigSockPortNumber\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\tfunction SetSigSockServerPath(v) {\n\t\tvar Prop = \"SigSockServerPath/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetSigSockClientName(v) {\n\t\tvar Prop = \"SigSockClientName/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetPortNumber(v) {\n\t\tvar Prop = \"PortNumber/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction SetSigSockPortNumber(v) {\n\t\tvar Prop = \"SigSockPortNumber/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction GetFirmwareRevision() {\n\t\tvar Prop = \"FirmwareRevision\";\n\n\t\tProp = Prop;\n\t\treturn SigWebGetProperty(Prop);\n\t}\n\n\n\tfunction SetTabletData(sigStr) {\n\t\tvar Prop = \"TabletData\";\n\n\t\tProp = Prop;\n\t\tSigWebSetStreamProperty(Prop, sigStr);\n\t}\n\n\n\n\tfunction GetTabletData() {\n\t\tvar Prop = \"TabletData\";\n\n\t\tProp = Prop;\n\t\tvar Str = SigWebGetProperty(Prop);\n\n\t\treturn Str.slice(1, Str.length - 1);\n\t}\n\n\n\tfunction OpenTablet(v) {\n\t\tvar Prop = \"OpenTablet/\";\n\n\t\tProp = Prop + v;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\tfunction CloseTablet() {\n\t\tvar Prop = \"CloseTablet\";\n\n\t\tProp = Prop;\n\t\tSigWebSetProperty(Prop);\n\t}\n\n\n\tfunction ResetParameters() {\n\t\tvar Prop = \"ResetParameters\";\n\n\t\tProp = Prop;\n\t\tSigWebSetPropertySync(Prop);\n\t}\n\n\n\tfunction testRawData() {\n\t\tOpenTablet(1);\n\t\tvar Str1 = GetTabletData();\n\t\tCloseTablet();\n\t}\n\n\tfunction Reset() {\n\t\tvar Prop = \"Reset\";\n\t\tSigWebSetProperty(Prop);\n\t}\n\n\tfunction SetTabletState(v, ctx, tv)\n\t{\n\t\tvar delay;\n\n\n\t\tif (tv)\n\t\t{\n\t\t\tdelay = tv;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdelay = 100;\n\t\t}\n\n\t\tif (GetTabletState() != v)\n\t\t{\n\t\t\tif (v == 1)\n\t\t\t{\n\t\t\t\tif (ctx)\n\t\t\t\t{\n\t\t\t\t\tvar can = ctx.canvas;\n\t\t\t\t\tSetDisplayXSize( can.width );\n\t\t\t\t\tSetDisplayYSize( can.height );\n\t\t\t\t\tSigWebSetDisplayTarget(ctx);\n\t\t\t\t}\n\t\t\t\tSetRealTabletState(v);\n\t\t\t\tif ( ctx && (GetTabletState() != 0) )\n\t\t\t\t{\n\t\t\t\t\tvar tmr = setInterval(SigWebRefresh, delay);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar tmr = null;\n\t\t\t\t}\n\n\t\t\t\treturn tmr;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (ctx)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(ctx);\n\t\t\t\t}\n\t\t\t\tSigWebSetDisplayTarget(null);\n\t\t\t\tSetRealTabletState(v);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n";
    private final static byte[]  _wl_block0Bytes = _getBytes( _wl_block0 );

    static private weblogic.jsp.internal.jsp.JspFunctionMapper _jspx_fnmap = weblogic.jsp.internal.jsp.JspFunctionMapper.getInstance();

    public void _jspService(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response) 
    throws javax.servlet.ServletException, java.io.IOException {

        javax.servlet.ServletConfig config = getServletConfig();
        javax.servlet.ServletContext application = config.getServletContext();
        javax.servlet.jsp.tagext.JspTag _activeTag = null;
        java.lang.Object page = this;
        javax.servlet.jsp.PageContext pageContext = javax.servlet.jsp.JspFactory.getDefaultFactory().getPageContext(this, request, response, null, true , 8192 , true );
        response.setHeader("Content-Type", "text/html");
        javax.servlet.jsp.JspWriter out = pageContext.getOut();
        weblogic.servlet.jsp.ByteWriter _bw = (weblogic.servlet.jsp.ByteWriter)out;
        _bw.setInitCharacterEncoding(_WL_ORIGINAL_ENCODING, _WL_ENCODED_BYTES_OK);
        javax.servlet.jsp.JspWriter _originalOut = out;
        javax.servlet.http.HttpSession session = request.getSession( true );
        try {;
            _bw.write(_wl_block0Bytes, _wl_block0);
        } catch (java.lang.Throwable __ee){
            if(!(__ee instanceof javax.servlet.jsp.SkipPageException)) {
                while ((out != null) && (out != _originalOut)) out = pageContext.popBody(); 
                _releaseTags(pageContext, _activeTag);
                pageContext.handlePageException(__ee);
            }
        }
    }
}
